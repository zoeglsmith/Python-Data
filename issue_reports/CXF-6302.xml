<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:46:44 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6302] JAXRS endpoints with URL encoded addresses can not be located</title>
                <link>https://issues.apache.org/jira/browse/CXF-6302</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I use url &quot;/Test%20Test/Test%20Test&quot; that define while create server via JAXRSServerFactoryBean. And I have error &quot;No service was found.&quot; for my URL.&lt;/p&gt;

&lt;p&gt;I found that class org.apache.cxf.transport.http.DestinationRegistryImpl has decoding logic for SOAP requests, but Restful requests skip this logic. Please, chec checkRestfulRequest method in this class. Thsi method doesn&apos;t use decodedDestinations map for search.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;DestinationRegistryImpl.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path : getDestinationsPaths()) {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; thePath = path.length() &amp;gt; 1 &amp;amp;&amp;amp; path.endsWith(SLASH) 
                ? path.substring(0, path.length() - 1) : path;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((address.equals(thePath) 
                || SLASH.equals(thePath)
                || (address.length() &amp;amp;gr; thePath.length() 
                    &amp;amp;&amp;amp; address.startsWith(thePath) &amp;amp;&amp;amp; address.charAt(thePath.length()) == &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;))
                &amp;amp;&amp;amp; thePath.length() &amp;amp;gr; len) {
                ret = getDestinationForPath(path);
                len = path.length();
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The thePath variable contains &quot;/Test Test/Test Test&quot;, but i registered my service with URL &quot;/Test%20Test/Test%20Test&quot;, so equals is false.&lt;/p&gt;

&lt;p&gt;Please, could you fix this issue. It is critical for us, because our URL can contains whitespaces. &lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12782827">CXF-6302</key>
            <summary>JAXRS endpoints with URL encoded addresses can not be located</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="mkamalov">Marat Kamalov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Mar 2015 11:22:53 +0000</created>
                <updated>Fri, 14 Oct 2016 14:24:00 +0000</updated>
                            <resolved>Fri, 20 Mar 2015 23:08:51 +0000</resolved>
                                    <version>3.0.3</version>
                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>2.7.16</fixVersion>
                    <fixVersion>3.0.5</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="14367027" author="sergey_beryozkin" created="Wed, 18 Mar 2015 11:45:06 +0000"  >&lt;p&gt;Can you clarify please ?&lt;br/&gt;
What address do you use when creating the server ?&lt;/p&gt;</comment>
                            <comment id="14367087" author="mkamalov" created="Wed, 18 Mar 2015 12:51:53 +0000"  >&lt;p&gt;We use &quot;/REST/Test%20Test/Test%20Test&quot; string as address.&lt;/p&gt;</comment>
                            <comment id="14367131" author="sergey_beryozkin" created="Wed, 18 Mar 2015 13:37:19 +0000"  >&lt;p&gt;I have to admit it is the 1st time we see it reported against the JAX-RS implementation. Typically one would create a &quot;/REST&quot; address and then push &quot;/Test%20Test/Test%20Test&quot; down to the actual service class and/or one of its methods. &lt;/p&gt;

&lt;p&gt;Actually, can you give me a favour and let me know what&lt;/p&gt;

&lt;p&gt;&quot;AbstractHTTPDestination d = destinationRegistry.getDestinationForPath(pathInfo, true);&quot;&lt;br/&gt;
(the second line in ServletController.invoke)&lt;/p&gt;

&lt;p&gt;returns in your case ? That is expected to return a non-null Destination in your case...&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="14367226" author="mkamalov" created="Wed, 18 Mar 2015 14:52:41 +0000"  >&lt;p&gt;We are create a server via JAXRSServerFactoryBean for each actual service, because we dynamically deploy and undeploy services. When server was created &quot;/REST/Test%20Test/Test%20Test&quot; was used as address. So, method address will be &quot;/Test%20Test/Test%20Test/Hello&quot;, becase we always use @Path(&quot;/&quot;) in interface.&lt;/p&gt;

&lt;p&gt;This line returns null, because pathInfo is &quot;/REST/Test Test/Test Test/Hello&quot;, but server was registered as &quot;/REST/Test%20Test/Test%20Test&quot;. And can&apos;t find destination with URL + METHOD NAME in map.&lt;/p&gt;

&lt;p&gt;I don&apos;t undestand where this code trim method path from URL&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; AbstractHTTPDestination getDestinationForPath(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; tryDecoding) {
        &lt;span class=&quot;code-comment&quot;&gt;// to use the url context match  
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; m = getTrimmedPath(path);
        AbstractHTTPDestination s = destinations.get(m);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (s == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            s = decodedDestinations.get(m);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; s;
    }
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getTrimmedPath(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; lh = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost/&quot;&lt;/span&gt;;
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; lhs = &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//localhost/&quot;&lt;/span&gt;;
&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.startsWith(lh)) {
            path = path.substring(lh.length());
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.startsWith(lhs)) {
            path = path.substring(lhs.length());
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!path.contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;) &amp;amp;&amp;amp; !path.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)) {
&lt;/span&gt;            path = &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + path;

        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; path;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14367230" author="mkamalov" created="Wed, 18 Mar 2015 14:55:32 +0000"  >&lt;p&gt;After that line returns null following logic starts for REST service that thim path from method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;d = destinationRegistry.checkRestfulRequest(pathInfo);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But this logic doesn&apos;t use decoded paths from map.&lt;/p&gt;

&lt;p&gt;Our services works fine if URL doesn&apos;t contains encoded characters.&lt;/p&gt;</comment>
                            <comment id="14367356" author="sergey_beryozkin" created="Wed, 18 Mar 2015 15:58:14 +0000"  >&lt;p&gt;Note having URL encoded address is fine inside JAX-RS resources, the problem happens only if a JAXRSServerFactoryBean address is URL encoded. &lt;/p&gt;</comment>
                            <comment id="14367357" author="sergey_beryozkin" created="Wed, 18 Mar 2015 15:58:48 +0000"  >&lt;p&gt;Yes, I see where the issue is now...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26wsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>