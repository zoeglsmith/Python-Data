<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:42:45 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3151] Invalid WS-A ReplyTo constant value used by WS-RM</title>
                <link>https://issues.apache.org/jira/browse/CXF-3151</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;There is an issue in the way how the current WS-RM implementation&lt;br/&gt;
downgrades the WS-A namespace/constants to the 2004/08 version. I&lt;br/&gt;
would like to first explain the problem and ask you which solution is&lt;br/&gt;
preferred.&lt;/p&gt;

&lt;p&gt;CXF uses WS-A 2005/08 internally but for WS-RM, it uses the 2004/08&lt;br/&gt;
version because the older WS-RM (1.0)&lt;br/&gt;
requires the use of the 2004/08 version. So, it is correct to convert&lt;br/&gt;
the internally used 2005/08 namespace/constants to their 2004/08&lt;br/&gt;
counterparts.&lt;/p&gt;

&lt;p&gt;However, one problem is that the 2005/08 WS-A spec defined two constants&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.w3.org/2005/08/addressing/anonymous&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.w3.org/2005/08/addressing/none&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/08/addressing/none&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;While the 2004/08 WS-A version seems to have only defined&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and not&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/none&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/none&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The current conversion used in CXF creates this undefined value and&lt;br/&gt;
this is causing some interoperability issues.&lt;br/&gt;
More concretely, when the WS-A ReplyTo element is set to the none&lt;br/&gt;
value and this is serialized into the above undefined 2004/08 none&lt;br/&gt;
constant, it is not recognized by some systems. According to the WS-RM&lt;br/&gt;
1.0, in such a case, the ReplyTo element should be omitted to convey&lt;br/&gt;
this &quot;none&quot; value (as there is no &quot;none&quot; constant).&lt;/p&gt;

&lt;p&gt;Initially, I thought we should fix this issue by introducing a configurable property &quot;usingNoneAddress&quot; for the addressing configuration bean to turn on or off the serialization of the none address. However, this approach had a drawback on requiring a different default value interpretation based on the used namespace versions (i.e., false for 2004/08 and true for 2005/08) to make the test cases all work.&lt;/p&gt;

&lt;p&gt;Therefore, I am proposing the following approach to solve this issue.&lt;/p&gt;

&lt;p&gt;There is no configuration property. The serialization is determined by the addressing namespace.  Under 2004/08, the none value is omitted from serialization, while under 2005/08, the none value is serialized.&lt;/p&gt;

&lt;p&gt;This will work for all the current tests except for the testVersioning test of MAPTest. This particular test uses the 2004/08 namespace and checks the presence of the ReplyTo header in the SOAP header, even though the header is associated with the none value and therefore it must not be present. In order to fix this test, I needed to modify the corresponding verification classes so that the presence of the ReplyTo header is not verified when the 2004/08 namespace is used.&lt;/p&gt;

&lt;p&gt;In summary, the changes that I suggest are as follows:&lt;/p&gt;

&lt;p&gt;For the runtime ws.addressing:&lt;br/&gt;
org.apache.cxf.ws.addressing.soap.MAPCodec&lt;br/&gt;
  The ReplyTo header will not be serialized with the invalid none value. In other words, if the value is set to the none value while using the 2004/08 namespace.&lt;/p&gt;

&lt;p&gt;org.apache.cxf.ws.addressing.ContextUtils&lt;br/&gt;
  The back channel will be found even when the ReplyTo header is missing.&lt;/p&gt;

&lt;p&gt;For the systests ws.addressing&lt;br/&gt;
org.apache.cxf.systest.ws.addressing MAPTestBase&lt;br/&gt;
  Its verifyHeaders method takes additionally a Boolean parameter replyToRequired to indicate whether the presence of the ReplyTo header must be verified.&lt;/p&gt;

&lt;p&gt;org.apache.cxf.systest.ws.addressing HeaderVerifier&lt;br/&gt;
  Its verify method call the above verityHeaders method with the replyToRequired parameter set based on the namespace version.&lt;/p&gt;

&lt;p&gt;The svn diff files of the above changes are attached.&lt;/p&gt;

&lt;p&gt;Regards, Aki&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480767">CXF-3151</key>
            <summary>Invalid WS-A ReplyTo constant value used by WS-RM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="ay">Akitoshi Yoshida</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Nov 2010 06:03:03 +0000</created>
                <updated>Mon, 6 Dec 2010 22:49:15 +0000</updated>
                            <resolved>Fri, 26 Nov 2010 07:43:08 +0000</resolved>
                                    <version>2.2.11</version>
                                    <fixVersion>2.2.12</fixVersion>
                    <fixVersion>2.3.1</fixVersion>
                    <fixVersion>2.4</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12935213" author="ay" created="Wed, 24 Nov 2010 06:08:19 +0000"  >&lt;p&gt;contains&lt;/p&gt;

&lt;p&gt;rt-ws-addr.diff -  svn diff on rt/ws/addr&lt;br/&gt;
systests-ws-specs.diff  - svn diff on systests/ws/specs&lt;/p&gt;</comment>
                            <comment id="12935947" author="ffang" created="Fri, 26 Nov 2010 07:43:08 +0000"  >&lt;p&gt;apply patch on behalf of Aki Yoshida with thanks&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1039249&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1039249&amp;amp;view=rev&lt;/a&gt; for trunk&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1039250&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1039250&amp;amp;view=rev&lt;/a&gt; for 2.3 branch&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1039254&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1039254&amp;amp;view=rev&lt;/a&gt; for 2.2 branch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12460335" name="svndiff.zip" size="1765" author="ay" created="Wed, 24 Nov 2010 06:08:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kl1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>118225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>