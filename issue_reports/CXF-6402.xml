<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:44:51 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6402] JettyHTTPServerEngine cannot set a provided Jetty Server</title>
                <link>https://issues.apache.org/jira/browse/CXF-6402</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;JettyHTTPServerEngine cannot accept setting a provided Jetty Server instance. Such thing will throw NullPointerException in line 460 (CXf 3.0.4)&lt;br/&gt;
The exception is thrown because an object (contexts) of class ContextHandlerCollection is only initialised when no jetty server is provided. Providing a server will leave the object uninitialised, throwing exception in runtime. &lt;/p&gt;</description>
                <environment>&lt;p&gt;JRE 7&lt;/p&gt;</environment>
        <key id="12829529">CXF-6402</key>
            <summary>JettyHTTPServerEngine cannot set a provided Jetty Server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="aalquaiti">Aymen Alquaiti</reporter>
                        <labels>
                            <label>Jetty</label>
                            <label>patch</label>
                    </labels>
                <created>Wed, 13 May 2015 11:40:06 +0000</created>
                <updated>Fri, 14 Oct 2016 14:25:22 +0000</updated>
                            <resolved>Mon, 18 May 2015 20:58:06 +0000</resolved>
                                    <version>3.0.4</version>
                                    <fixVersion>3.1.1</fixVersion>
                    <fixVersion>3.0.6</fixVersion>
                    <fixVersion>2.7.17</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14544307" author="sergey_beryozkin" created="Thu, 14 May 2015 20:24:44 +0000"  >&lt;p&gt;I&apos;ve checked the source on the trunk, I see a non-conditional initialization:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;contexts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ContextHandlerCollection();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;before &apos;contexts&apos; are used in the following if/else branch.&lt;/p&gt;

&lt;p&gt;Can you check it please ?&lt;/p&gt;</comment>
                            <comment id="14544347" author="aalquaiti" created="Thu, 14 May 2015 20:55:17 +0000"  >&lt;p&gt;Initialization is put within if/then statement. Line 324 (CXF 3.0.4) is read as:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;if (server == null){&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;contexts variable is only initialized if no default Jetty server was set.&lt;/p&gt;</comment>
                            <comment id="14545208" author="sergey_beryozkin" created="Fri, 15 May 2015 09:28:35 +0000"  >&lt;p&gt;Indeed, see it now, thanks&lt;/p&gt;</comment>
                            <comment id="14547193" author="aalquaiti" created="Sun, 17 May 2015 14:48:17 +0000"  >&lt;p&gt;Thank you.  I think we need to add:&lt;br/&gt;
if(server != null) {&lt;br/&gt;
server.setHandler(contexts);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This will mimic the same steps taken by the default created jetty server&lt;/p&gt;</comment>
                            <comment id="14547335" author="aalquaiti" created="Sun, 17 May 2015 20:44:42 +0000"  >&lt;p&gt;Tested the patch. The NPE is solved, but due to that contexts variable is not added to provided Jetty server, published service cannot be reached. Client received HTTP 404.&lt;br/&gt;
Accessing WSDL file through browser revels the same response.&lt;/p&gt;</comment>
                            <comment id="14548264" author="sergey_beryozkin" created="Mon, 18 May 2015 16:43:32 +0000"  >&lt;p&gt;Sure, I&apos;ve added that line, the addServant() code needs a bit of refactoring but I guess it is too sensitive at this stage. Let me know if it works now&lt;/p&gt;</comment>
                            <comment id="14549143" author="aalquaiti" created="Mon, 18 May 2015 20:23:27 +0000"  >&lt;p&gt;Causes java.lang.IllegalStateException: STARTED by Jetty Server. Not running the server and leaving it to cxf also causes problems.&lt;/p&gt;

&lt;p&gt;I played with the code a little. Seems this fixes the problem:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;if(contexts == null) {&lt;br/&gt;
            if(server != null) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {                contexts = (ContextHandlerCollection) server.getHandler();            }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;        }&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But that&apos;s just a ClassCastException disaster waiting to occur. What do you suggest?&lt;/p&gt;</comment>
                            <comment id="14549202" author="sergey_beryozkin" created="Mon, 18 May 2015 20:50:57 +0000"  >&lt;p&gt;OK, lets do one more try. If it does not work - please create a patch with a test. The code has been updated to check if the handler is of the same type and if yes then it casts it &lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="14549213" author="aalquaiti" created="Mon, 18 May 2015 20:56:27 +0000"  >&lt;p&gt;Works perfectly. Thank you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14549216" author="sergey_beryozkin" created="Mon, 18 May 2015 20:58:06 +0000"  >&lt;p&gt;Cool, thanks for a quick confirmation and the proposed patches&lt;/p&gt;
</comment>
                            <comment id="14549241" author="aalquaiti" created="Mon, 18 May 2015 21:13:57 +0000"  >&lt;p&gt;Let us assume that a provided Jetty server does not have a handler. Won&apos;t that produce the same problem of WSDL and services not being reachable?&lt;br/&gt;
This bug is fixed, but I will continue on testing. I will try to suggest patch next time.&lt;/p&gt;

&lt;p&gt;Thank you again&lt;/p&gt;</comment>
                            <comment id="14549250" author="sergey_beryozkin" created="Mon, 18 May 2015 21:17:38 +0000"  >&lt;p&gt;Well in this case we had a non null server and the handler so I assume that Jetty initializes the handler itself in this case - if you can actually reproduce a non-null server with a null handler - then sure we tweak it a bit more &lt;/p&gt;</comment>
                            <comment id="14549256" author="aalquaiti" created="Mon, 18 May 2015 21:22:43 +0000"  >&lt;p&gt;I did that. Produced a non null server with null handler. And we&apos;re back to NPE again.&lt;/p&gt;</comment>
                            <comment id="14550248" author="sergey_beryozkin" created="Tue, 19 May 2015 11:20:37 +0000"  >&lt;p&gt;Ok, one more update. Please do patches with tests next if needed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eod3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>