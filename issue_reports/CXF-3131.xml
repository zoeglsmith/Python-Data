<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:43:46 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3131] CXF XCJ DV Plugin removes XmlElement Annotation from Fields</title>
                <link>https://issues.apache.org/jira/browse/CXF-3131</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Using the XJC default value plugin (org.apache.cxf.xjcplugins:cxf-xjc-dv) removes the @XmlElement(name=...) annotation from fields where it adds a default value.&lt;/p&gt;

&lt;p&gt;For example, see the following XSD fragment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;TypeA&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:sequence&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Customer&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;tns:customerTypeWithDefaultValuesInside&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:sequence&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:complexType&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Without&lt;/b&gt; dv, the following code is generated:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;TypeA.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
    @XmlElement(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;Customer&quot;&lt;/span&gt;, required = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; CustomerTypeWithDefaultValuesInside customer;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, &lt;b&gt;With&lt;/b&gt; -X-dv, the following code is generated:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;TypeA.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
    /*
    *
    */
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; CustomerTypeWithDefaultValuesInside customer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CustomerTypeWithDefaultValuesInside();
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the XmlElement annotation missing, the XML instance generated during marshalling contains an element &lt;tt&gt;&amp;lt;customer&amp;gt;&lt;/tt&gt;, instead of &lt;tt&gt;&amp;lt;Customer&amp;gt;&lt;/tt&gt; - which does not correspond to the definition in the XSD and is therefor invalid.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12480204">CXF-3131</key>
            <summary>CXF XCJ DV Plugin removes XmlElement Annotation from Fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="agudian">Andreas Gudian</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Nov 2010 10:09:49 +0000</created>
                <updated>Fri, 21 Jan 2011 18:14:30 +0000</updated>
                            <resolved>Sat, 8 Jan 2011 02:16:33 +0000</resolved>
                                    <version>2.3</version>
                                    <fixVersion>2.3.2</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12932885" author="agudian" created="Wed, 17 Nov 2010 10:16:36 +0000"  >&lt;p&gt;My guess is, that the reason is the following code in org.apache.cxf.xjc.dv.DefaultValuePlugin:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.cxf.xjc.dv.DefaultValuePlugin.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// line 135
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (xsType != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; xsType.isComplexType() &amp;amp;&amp;amp; containsDefaultValue(outline, f)) {
                    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; varName = f.getPropertyInfo().getName(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    JFieldVar &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; = co.implClass.fields().get(varName);
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        co.implClass.removeField(&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;);

                        JFieldVar newVar = co.implClass.field(&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;.mods().getValue(), 
                                                              &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;.type(), 
                                                              &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;.name(), 
                                                              JExpr._new(f.getRawType()));
                        newVar.javadoc().append(&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;.javadoc());
                    }
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The annotation from the old field var is not copied to the new field newVar. &lt;/p&gt;

&lt;p&gt;Perhaps I&apos;m missing something, but wouldn&apos;t be the following change just do the trick?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;org.apache.cxf.xjc.dv.DefaultValuePlugin.java - Proposed Fix&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// line 135
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (xsType != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; xsType.isComplexType() &amp;amp;&amp;amp; containsDefaultValue(outline, f)) {
                    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; varName = f.getPropertyInfo().getName(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    JFieldVar &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; = co.implClass.fields().get(varName);
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;.init(JExpr._new(f.getRawType()));
                    }
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can anyone check this, please? &lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178886</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>