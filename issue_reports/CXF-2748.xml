<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:46:07 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2748] Unmarshalling error when using fastinfoset</title>
                <link>https://issues.apache.org/jira/browse/CXF-2748</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have a webservice operation that returns primitive &quot;string&quot;. I call this very same operation in three different ways: 1. without any sort of compression; 2. with mtom compression 3. with fastinfoset compression.&lt;/p&gt;

&lt;p&gt;The no compression call and mtom compression call works but fastinfoset call fails with this exception:&lt;/p&gt;

&lt;p&gt;15:24:49,328 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; apache.cxf.phase.PhaseInterceptorChain (240)     - Invoking handleMessage on interceptor org.apache.cxf.interceptor.DocLiteralInInterceptor@1bb3e9a&lt;br/&gt;
15:24:49,343 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; apache.cxf.phase.PhaseInterceptorChain (365)     - Interceptor for &lt;/p&gt;
{http://blahblah/email/service}
&lt;p&gt;EmailUS#&lt;/p&gt;
{http://blahblah/email/service}
&lt;p&gt;sendEmail has thrown exception, unwinding now&lt;br/&gt;
org.apache.cxf.interceptor.Fault: Unmarshalling Error: null&lt;br/&gt;
        at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:780)&lt;br/&gt;
        at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:624)&lt;br/&gt;
        at org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:128)&lt;br/&gt;
        at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:106)&lt;br/&gt;
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)&lt;br/&gt;
        at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:672)&lt;br/&gt;
        at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2254)&lt;br/&gt;
        at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2134)&lt;br/&gt;
        at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1988)&lt;br/&gt;
        at org.apache.cxf.io.CacheAndWriteOutputStream.postClose(CacheAndWriteOutputStream.java:47)&lt;br/&gt;
        at org.apache.cxf.io.CachedOutputStream.close(CachedOutputStream.java:188)&lt;br/&gt;
        at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:66)&lt;br/&gt;
        at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:639)&lt;br/&gt;
        at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)&lt;br/&gt;
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)&lt;br/&gt;
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:484)&lt;br/&gt;
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:310)&lt;br/&gt;
        at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:262)&lt;br/&gt;
        at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)&lt;br/&gt;
        at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)&lt;br/&gt;
        at $Proxy67.sendEmail(Unknown Source)&lt;br/&gt;
        at blahblah.email.service.EmailUSWSImplTest.prepareAndCallSendEmailWebService(EmailUSWSImplTest.java:332)&lt;br/&gt;
        at blahblah.email.service.EmailUSWSImplTest.testSendEmailWithFastinfosetCompression(EmailUSWSImplTest.java:304)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)&lt;br/&gt;
        at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)&lt;br/&gt;
        at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)&lt;br/&gt;
        at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)&lt;br/&gt;
        at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)&lt;br/&gt;
        at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)&lt;br/&gt;
        at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)&lt;br/&gt;
        at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)&lt;br/&gt;
        at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)&lt;br/&gt;
        at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)&lt;br/&gt;
        at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)&lt;br/&gt;
        at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:59)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:115)&lt;br/&gt;
        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:102)&lt;br/&gt;
        at org.apache.maven.surefire.Surefire.run(Surefire.java:180)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)&lt;br/&gt;
        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)&lt;br/&gt;
Caused by: java.lang.AssertionError&lt;br/&gt;
        at com.sun.xml.bind.v2.util.QNameMap.getEntry(QNameMap.java:460)&lt;br/&gt;
        at com.sun.xml.bind.v2.util.QNameMap.get(QNameMap.java:158)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.StructureLoader.childElement(StructureLoader.java:241)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:478)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:459)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.FastInfosetConnector.handleStartElement(FastInfosetConnector.java:162)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.FastInfosetConnector.bridge(FastInfosetConnector.java:105)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:360)&lt;br/&gt;
        at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:339)&lt;br/&gt;
        at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshall(JAXBEncoderDecoder.java:755)&lt;br/&gt;
        ... 48 more&lt;/p&gt;

&lt;p&gt;If I change return type of the operation to one way (remove output message from the porttype def) the call to fastinfoset works just fine!!! But as soon as I make the operation two way, it brings this error.&lt;br/&gt;
I tried:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changing return type to int;&lt;/li&gt;
	&lt;li&gt;enabling FI declaratively by adding &amp;lt;fastinfoset/&amp;gt; to bus definition in cxf.xml&lt;/li&gt;
	&lt;li&gt;enabling FI programaticaly by adding FIStaxXXInterceptor to endpoints&lt;/li&gt;
	&lt;li&gt;adding fresh new operation to the webservice with the return value and testing if it works&lt;/li&gt;
	&lt;li&gt;setting a system property of: &quot;com.sun.xml.fastinfoset.parser.string-interning&quot; to &quot;true&quot;&lt;br/&gt;
none of this worked for me.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Attention&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;This issue is fixed in 2.3.0-SNAPSHOT!&lt;/li&gt;
	&lt;li&gt;Setting a system property of: &quot;com.sun.xml.fastinfoset.parser.string-interning&quot; to &quot;true&quot; works for the simplified test project I have attached to this ticket (dkulp already tested, replicated and confirmed this issue with using the provided test project).&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>&lt;p&gt;Windows Vista&lt;br/&gt;
jdk1.6.0_07&lt;/p&gt;</environment>
        <key id="12460833">CXF-2748</key>
            <summary>Unmarshalling error when using fastinfoset</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="reinis_v">Reinis Vicups</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Mar 2010 16:06:07 +0000</created>
                <updated>Thu, 15 Apr 2010 10:29:22 +0000</updated>
                            <resolved>Thu, 8 Apr 2010 01:32:53 +0000</resolved>
                                    <version>2.2.7</version>
                                    <fixVersion>2.2.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12851922" author="reinis_v" created="Wed, 31 Mar 2010 16:09:24 +0000"  >&lt;p&gt;test project&lt;/p&gt;</comment>
                            <comment id="12852411" author="dkulp" created="Thu, 1 Apr 2010 15:10:32 +0000"  >&lt;p&gt;&lt;br/&gt;
&lt;br/&gt;
Can you test your &quot;live&quot; project with the latest 2.2.8-SNAPSHOT jars?  I backported some more fixes from 2.3 for this so I THINK it should now work fine.  Before marking this resolved, I&apos;d like to be sure.&lt;/p&gt;</comment>
                            <comment id="12857259" author="reinis_v" created="Thu, 15 Apr 2010 10:28:42 +0000"  >&lt;p&gt;sry for the delay. I confirm that my live project works with 2.2.8-SNAPSHOT as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12440356" name="cxf.jaxws.infoset.twoway.mep.test.zip" size="77441" author="reinis_v" created="Wed, 31 Mar 2010 16:09:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>