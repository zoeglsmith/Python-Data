<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:44:28 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1737] NPE in ClientProxyFactoryBean on void methods </title>
                <link>https://issues.apache.org/jira/browse/CXF-1737</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If you try to access a service containing a method returning nothing (void), the ClientProxyFactoryBean fails with a NullPointerException:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeParameter(ReflectionServiceFactoryBean.java:643)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeClassInfo(ReflectionServiceFactoryBean.java:609)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeWSDLOperation(ReflectionServiceFactoryBean.java:540)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeWSDLOperations(ReflectionServiceFactoryBean.java:510)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromWSDL(ReflectionServiceFactoryBean.java:305)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:394)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:181)&lt;br/&gt;
	at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:79)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientFactoryBean.create(ClientFactoryBean.java:51)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientProxyFactoryBean.create(ClientProxyFactoryBean.java:97)&lt;/p&gt;

&lt;p&gt;If you change the method returning something or eliminate the method altogether, everything works fine...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401865">CXF-1737</key>
            <summary>NPE in ClientProxyFactoryBean on void methods </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="benneke">Andreas Benneke</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Aug 2008 07:28:19 +0000</created>
                <updated>Mon, 18 Aug 2008 18:26:27 +0000</updated>
                            <resolved>Fri, 8 Aug 2008 21:20:55 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.0.9</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12620788" author="lothian" created="Thu, 7 Aug 2008 23:30:38 +0000"  >&lt;p&gt;I couldn&apos;t reproduce that issue, but found out the following piece of code within DefaultServiceConfiguration:&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public Boolean hasOutMessage(Method m) {&lt;br/&gt;
        if (m.getReturnType().getClass().equals(void.class) &amp;amp;&amp;amp; m.getExceptionTypes().length == 0) &lt;/p&gt;
{
            return false;
        }&lt;br/&gt;
        return true;&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
I believe Java 5 will do some auto-boxing with void.class that might result in Void.class which is, I think, different from Void.TYPE. So, since Void.TYPE is the Class representation of the primitive void, changing the method to the following might do the trick:&lt;br/&gt;
&lt;br/&gt;
    @Override&lt;br/&gt;
    public Boolean hasOutMessage(Method m) {&lt;br/&gt;
        if (m.getReturnType().getClass().equals(Void.TYPE) &amp;amp;&amp;amp; m.getExceptionTypes().length == 0) {            return false;        }
&lt;p&gt;        return true;&lt;br/&gt;
    }&lt;/p&gt;
</comment>
                            <comment id="12620883" author="benneke" created="Fri, 8 Aug 2008 09:29:39 +0000"  >&lt;p&gt;Finally I managed to strip things down to the attached test project. &lt;/p&gt;

&lt;p&gt;The junit test starts the server endpoint and tries to call it with &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;plain JaxWS (which works),&lt;/li&gt;
	&lt;li&gt;the JaxWsProxyFactoryBean (which also works) and&lt;/li&gt;
	&lt;li&gt;the ClientProxyFactoryBean (which fails with the given exception)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12620886" author="benneke" created="Fri, 8 Aug 2008 09:37:45 +0000"  >&lt;p&gt;Simon, thanks for looking into it. I&apos;ve just attached a test case to reproduce the exception.&lt;/p&gt;

&lt;p&gt;According to my tests, the following assertions are all valid:&lt;/p&gt;

&lt;p&gt;		assertTrue(Void.TYPE.equals(void.class));&lt;br/&gt;
		assertFalse(Void.class.equals(void.class));&lt;br/&gt;
		assertFalse(Void.class.equals(Void.TYPE));&lt;/p&gt;

&lt;p&gt;Therefore, as far as I see the change you propose would not change anything. One could however be on the very save side by doing somthing like this:&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public Boolean hasOutMessage(Method m) {&lt;br/&gt;
        Class rt = m.getReturnType().getClass();&lt;br/&gt;
        if ((rt.equals(Void.TYPE) || rt.equals(Void.class)) &amp;amp;&amp;amp; m.getExceptionTypes().length == 0) &lt;/p&gt;
{
            return false;
        }
&lt;p&gt;        return true;&lt;br/&gt;
    } &lt;/p&gt;
</comment>
                            <comment id="12620888" author="benneke" created="Fri, 8 Aug 2008 09:42:13 +0000"  >&lt;p&gt;Aaaaah, I see. It does m.getReturnType().getClass() which will always be &quot;Class&quot; as getReturnType() already returns the value. So this method will never return false and it should read:&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public Boolean hasOutMessage(Method m) {&lt;br/&gt;
        Class rt = m.getReturnType().getClass();&lt;br/&gt;
        if ((rt.equals(Void.TYPE) || rt.equals(Void.class)) &amp;amp;&amp;amp; m.getExceptionTypes().length == 0) &lt;/p&gt;
{
            return false;
        }&lt;br/&gt;
        return true;&lt;br/&gt;
    } &lt;br/&gt;
&lt;br/&gt;
However I think, the following change would be enough:&lt;br/&gt;
&lt;br/&gt;
    @Override&lt;br/&gt;
    public Boolean hasOutMessage(Method m) {&lt;br/&gt;
        if (m.getReturnType().equals(void.class) &amp;amp;&amp;amp; m.getExceptionTypes().length == 0) {            return false;        }
&lt;p&gt;        return true;&lt;br/&gt;
    } &lt;/p&gt;
</comment>
                            <comment id="12621012" author="dkulp" created="Fri, 8 Aug 2008 19:08:58 +0000"  >

&lt;p&gt;Thanks for the testcase.   Very useful.  &lt;/p&gt;

&lt;p&gt;The &quot;correct&quot; fix is actually on line 618:&lt;br/&gt;
        if (!initializeParameter(o, method, -1, paramType, genericType)) &lt;/p&gt;
{
            return false;
        }&lt;br/&gt;
&lt;br/&gt;
should change to:&lt;br/&gt;
        if (o.hasOutput()&lt;br/&gt;
            &amp;amp;&amp;amp; !initializeParameter(o, method, -1, paramType, genericType)) {            return false;        }

&lt;p&gt;Basically, if the wsdl states there is no output message (it&apos;s a one-way), then the return type is irrelevant and should/could be completely skipped.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387802" name="void.zip" size="2465" author="benneke" created="Fri, 8 Aug 2008 09:29:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sygn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>167060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>