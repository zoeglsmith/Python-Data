<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:45:39 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2554] JaxWsDynamicClientFactory.createClient(URL) and o.a.cxf.endpoint.Client.invoke(String operationName, Object... params) generates illegal XML, WstxParsingException on server.</title>
                <link>https://issues.apache.org/jira/browse/CXF-2554</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Creating a client with:&lt;/p&gt;

&lt;p&gt;JaxWsDynamicClientFactory.newInstance().createClient(URL) &lt;/p&gt;

&lt;p&gt;and calling it with:&lt;/p&gt;

&lt;p&gt;org.apache.cxf.endpoint.Client.invoke(String operationName, Object... params) &lt;/p&gt;

&lt;p&gt;throws the Exception &lt;/p&gt;

&lt;p&gt;com.ctc.wstx.exc.WstxParsingException: Duplicate declaration for namespace prefix &apos;wsu&apos;.&lt;/p&gt;

&lt;p&gt;on in server built with CXF&lt;/p&gt;

&lt;p&gt;Attaching WSDL.&lt;/p&gt;

&lt;p&gt;Logging output:&lt;/p&gt;

&lt;p&gt;Nov 20, 2009 11:31:12 AM org.apache.cxf.endpoint.dynamic.DynamicClientFactory outputDebug&lt;br/&gt;
INFO: Created classes: appinterface.seagullsw.com.appinterfaceserver.ObjectFactory, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssAll, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssAllInResponse, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssAllInResponseResponse, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssAllResponse, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssEncrypt, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssEncryptResponse, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssSignature, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssSignatureResponse, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssTimestamp, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssTimestampResponse, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssUsernameToken, appinterface.seagullsw.com.appinterfaceserver.TestOneStringArgWssUsernameTokenResponse&lt;br/&gt;
Nov 20, 2009 11:31:18 AM org.apache.cxf.interceptor.LoggingInInterceptor logging&lt;br/&gt;
INFO: Inbound Message&lt;br/&gt;
----------------------------&lt;br/&gt;
ID: 15&lt;br/&gt;
Address: /AppInterfaceServer&lt;br/&gt;
Encoding: UTF-8&lt;br/&gt;
Content-Type: text/xml; charset=UTF-8&lt;br/&gt;
Headers: &lt;/p&gt;
{content-type=[text/xml; charset=UTF-8], connection=[keep-alive], transfer-encoding=[chunked], Host=[localhost:8070], SOAPAction=[&quot;test.oneStringArgWssAll&quot;], User-Agent=[Apache CXF 2.2.5], Content-Type=[text/xml; charset=UTF-8], Accept=[*/*], Pragma=[no-cache], Cache-Control=[no-cache]}
&lt;p&gt;Payload: &amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xenc=&quot;http://www.w3.org/2001/04/xmlenc#&quot;&amp;gt;&amp;lt;soap:Header&amp;gt;&amp;lt;wsse:Security xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; soap:mustUnderstand=&quot;1&quot;&amp;gt;&amp;lt;wsu:Timestamp xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;Timestamp-5&quot;&amp;gt;&amp;lt;wsu:Created&amp;gt;2009-11-20T19:31:18.544Z&amp;lt;/wsu:Created&amp;gt;&amp;lt;wsu:Expires&amp;gt;2009-11-20T19:31:28.544Z&amp;lt;/wsu:Expires&amp;gt;&amp;lt;/wsu:Timestamp&amp;gt;&amp;lt;xenc:EncryptedKey xmlns:xenc=&quot;http://www.w3.org/2001/04/xmlenc#&quot; Id=&quot;EncKeyId-07EB048258FAA1C61812587454784635&quot;&amp;gt;&amp;lt;xenc:EncryptionMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#rsa-1_5&quot; /&amp;gt;&amp;lt;ds:KeyInfo xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;&lt;br/&gt;
&amp;lt;wsse:SecurityTokenReference xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&amp;gt;&amp;lt;ds:X509Data&amp;gt;&lt;br/&gt;
&amp;lt;ds:X509IssuerSerial&amp;gt;&lt;br/&gt;
&amp;lt;ds:X509IssuerName&amp;gt;CN=serverKeys&amp;lt;/ds:X509IssuerName&amp;gt;&lt;br/&gt;
&amp;lt;ds:X509SerialNumber&amp;gt;1205178067&amp;lt;/ds:X509SerialNumber&amp;gt;&lt;br/&gt;
&amp;lt;/ds:X509IssuerSerial&amp;gt;&lt;br/&gt;
&amp;lt;/ds:X509Data&amp;gt;&amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;br/&gt;
&amp;lt;/ds:KeyInfo&amp;gt;&amp;lt;xenc:CipherData&amp;gt;&amp;lt;xenc:CipherValue&amp;gt;RL7Dc35cwFOyIjqrPbFrbTuQUjRrn4l4Xr5KGBhZlbyFCAnI/CO6oNdgk10kKajImSpFa+zw0LmrCZYhYE2k0VYs3fexwdmM6UpeIWqdEOVmpMiruqgY+39pd8AKJOqT9IQCnG9zQ3IP4TJKrdugBcYgLhsSnUvmh//mXEV96mE=&amp;lt;/xenc:CipherValue&amp;gt;&amp;lt;/xenc:CipherData&amp;gt;&amp;lt;xenc:ReferenceList&amp;gt;&amp;lt;xenc:DataReference URI=&quot;#EncDataId-4&quot; /&amp;gt;&amp;lt;/xenc:ReferenceList&amp;gt;&amp;lt;/xenc:EncryptedKey&amp;gt;&amp;lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; Id=&quot;Signature-2&quot;&amp;gt;&lt;br/&gt;
&amp;lt;ds:SignedInfo&amp;gt;&lt;br/&gt;
&amp;lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;ds:Reference URI=&quot;#id-3&quot;&amp;gt;&lt;br/&gt;
&amp;lt;ds:Transforms&amp;gt;&lt;br/&gt;
&amp;lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/ds:Transforms&amp;gt;&lt;br/&gt;
&amp;lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;ds:DigestValue&amp;gt;yVtODoPiC9+aUxFYj19IRxHI5fo=&amp;lt;/ds:DigestValue&amp;gt;&lt;br/&gt;
&amp;lt;/ds:Reference&amp;gt;&lt;br/&gt;
&amp;lt;/ds:SignedInfo&amp;gt;&lt;br/&gt;
&amp;lt;ds:SignatureValue&amp;gt;&lt;br/&gt;
RDIY/X+KWeofWR0aN5ErYSxs0AOJF9DE+8K+xFZb8VPMSRFO6UBZW/x59KtzvBeUR7nlLk+QGI3G&lt;br/&gt;
6O/tz7AAKG9m7Jwkxr/dWZBWXuZNaxid9+Lh7Vx+BOes/KziskHZQyXl60zPouUpyqf1u3EMB3iC&lt;br/&gt;
B76Wdy4CfppmhZFyAnA=&lt;br/&gt;
&amp;lt;/ds:SignatureValue&amp;gt;&lt;br/&gt;
&amp;lt;ds:KeyInfo Id=&quot;KeyId-07EB048258FAA1C61812587454772262&quot;&amp;gt;&lt;br/&gt;
&amp;lt;wsse:SecurityTokenReference xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;STRId-07EB048258FAA1C61812587454772283&quot;&amp;gt;&amp;lt;ds:X509Data&amp;gt;&lt;br/&gt;
&amp;lt;ds:X509IssuerSerial&amp;gt;&lt;br/&gt;
&amp;lt;ds:X509IssuerName&amp;gt;CN=clientKeys&amp;lt;/ds:X509IssuerName&amp;gt;&lt;br/&gt;
&amp;lt;ds:X509SerialNumber&amp;gt;1205178070&amp;lt;/ds:X509SerialNumber&amp;gt;&lt;br/&gt;
&amp;lt;/ds:X509IssuerSerial&amp;gt;&lt;br/&gt;
&amp;lt;/ds:X509Data&amp;gt;&amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;br/&gt;
&amp;lt;/ds:KeyInfo&amp;gt;&lt;br/&gt;
&amp;lt;/ds:Signature&amp;gt;&amp;lt;wsse:UsernameToken xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;UsernameToken-1&quot;&amp;gt;&amp;lt;wsse:Username&amp;gt;clientKeys&amp;lt;/wsse:Username&amp;gt;&amp;lt;wsse:Password Type=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;&amp;gt;clientKeysPassword&amp;lt;/wsse:Password&amp;gt;&amp;lt;/wsse:UsernameToken&amp;gt;&amp;lt;/wsse:Security&amp;gt;&amp;lt;/soap:Header&amp;gt;&amp;lt;soap:Body xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;id-3&quot;&amp;gt;&amp;lt;xenc:EncryptedData xmlns:xenc=&quot;http://www.w3.org/2001/04/xmlenc#&quot; Id=&quot;EncDataId-4&quot; Type=&quot;http://www.w3.org/2001/04/xmlenc#Content&quot;&amp;gt;&amp;lt;xenc:EncryptionMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#aes128-cbc&quot; /&amp;gt;&amp;lt;ds:KeyInfo xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;&lt;br/&gt;
&amp;lt;wsse:SecurityTokenReference xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&amp;gt;&amp;lt;wsse:Reference xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; URI=&quot;#EncKeyId-07EB048258FAA1C61812587454784635&quot; /&amp;gt;&amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;br/&gt;
&amp;lt;/ds:KeyInfo&amp;gt;&amp;lt;xenc:CipherData&amp;gt;&amp;lt;xenc:CipherValue&amp;gt;ds6OLheJbTyDK/oxqto7mEzxdb44E3OD+HKxxI2Z44bSNccEZ02Uuw9q2SipHb313BiTXp4V6Dr9&lt;br/&gt;
WAvRjMFLaqDLfvGIV7fEH9Fyx59A1qI0p/ByNX3q8KtHgxXhQBCTICk56Ja+TVO1jScEFjSm32FZ&lt;br/&gt;
tNWoT1jz3qfpDnz+hs2EciXsOVA/I6/cSCpkcy0K4BU/wFKVFH486JtJq9dMQHSy6TJHYbGpVaaB&lt;br/&gt;
04mff4YlauNg2q9HXA9Cwk2iOOJMvGoA43higsinfeM/9cGZaBV+tDXikBNehKaShggsTAN/TH5N&lt;br/&gt;
z9uoZq2B1J8c+aitj0TX5Y68SdZnGyIz5uIMhWSKdd7Y7yLzheU1L/ZMyMiQ4l2JQkFRUnfEFWY0&lt;br/&gt;
HHy9hxEvNz61+9fzzsQLEYcZxTSZoKJ1Q1Nvzwn4R+roDRwKMPLcsWEO1EVOmDhWzHzDsP+KbmcG&lt;br/&gt;
DyCxurs4xdLik0Uklo6P313g9KXeYrkR47hPGvuxnIhucLfu5oNgAX3z&amp;lt;/xenc:CipherValue&amp;gt;&amp;lt;/xenc:CipherData&amp;gt;&amp;lt;/xenc:EncryptedData&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;br/&gt;
--------------------------------------&lt;br/&gt;
Nov 20, 2009 11:31:18 AM org.apache.cxf.phase.PhaseInterceptorChain doIntercept&lt;br/&gt;
WARNING: Interceptor has thrown exception, unwinding now&lt;br/&gt;
org.apache.cxf.binding.soap.SoapFault: Error reading XMLStreamReader.&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:230)&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:60)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;br/&gt;
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:109)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:98)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:394)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:170)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:142)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)&lt;br/&gt;
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)&lt;br/&gt;
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)&lt;br/&gt;
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)&lt;br/&gt;
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
	at org.mortbay.jetty.Server.handle(Server.java:326)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:842)&lt;br/&gt;
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)&lt;br/&gt;
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)&lt;br/&gt;
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)&lt;br/&gt;
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451)&lt;br/&gt;
Caused by: com.ctc.wstx.exc.WstxParsingException: Duplicate declaration for namespace prefix &apos;wsu&apos;.&lt;br/&gt;
 at [row,col &lt;/p&gt;
{unknown-source}
&lt;p&gt;]: &lt;span class=&quot;error&quot;&gt;&amp;#91;26,230&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.ctc.wstx.sr.StreamScanner.constructWfcException(StreamScanner.java:605)&lt;br/&gt;
	at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:461)&lt;br/&gt;
	at com.ctc.wstx.sr.BasicStreamReader.handleNsAttrs(BasicStreamReader.java:3020)&lt;br/&gt;
	at com.ctc.wstx.sr.BasicStreamReader.handleStartElem(BasicStreamReader.java:2934)&lt;br/&gt;
	at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2846)&lt;br/&gt;
	at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1019)&lt;br/&gt;
	at org.apache.cxf.staxutils.DepthXMLStreamReader.next(DepthXMLStreamReader.java:220)&lt;br/&gt;
	at org.apache.cxf.staxutils.PartialXMLStreamReader.next(PartialXMLStreamReader.java:41)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:908)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.startElement(StaxUtils.java:826)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:868)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.startElement(StaxUtils.java:826)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:868)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.startElement(StaxUtils.java:826)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:868)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.startElement(StaxUtils.java:826)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:868)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.startElement(StaxUtils.java:826)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:868)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.read(StaxUtils.java:755)&lt;br/&gt;
	at org.apache.cxf.staxutils.StaxUtils.read(StaxUtils.java:744)&lt;br/&gt;
	at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:144)&lt;br/&gt;
	... 26 more&lt;br/&gt;
Nov 20, 2009 11:31:18 AM org.apache.cxf.interceptor.LoggingOutInterceptor$LoggingCallback onClose&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Microsoft Windows &lt;span class=&quot;error&quot;&gt;&amp;#91;Version 6.0.6002&amp;#93;&lt;/span&gt; (Vista Buisiness N 64 bits)&lt;/p&gt;

&lt;p&gt;java version &quot;1.6.0_16&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_16-b01)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 14.2-b01, mixed mode)&lt;/p&gt;</environment>
        <key id="12441325">CXF-2554</key>
            <summary>JaxWsDynamicClientFactory.createClient(URL) and o.a.cxf.endpoint.Client.invoke(String operationName, Object... params) generates illegal XML, WstxParsingException on server.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2009 19:52:35 +0000</created>
                <updated>Thu, 10 Mar 2011 23:16:51 +0000</updated>
                            <resolved>Mon, 14 Dec 2009 22:38:22 +0000</resolved>
                                    <version>2.2.5</version>
                    <version>2.2.6</version>
                                    <fixVersion>2.2.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12780733" author="ggregory@seagullsw.com" created="Fri, 20 Nov 2009 19:53:05 +0000"  >&lt;p&gt;Client code:&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Test all WS-Security options at once.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws Exception&lt;br/&gt;
     */&lt;br/&gt;
    @Test&lt;br/&gt;
    public void testWssAll() throws Exception {&lt;br/&gt;
        URL wsdl = ClassLoader.getSystemResource(RESOURCES + &quot;/functions/TestBackEndWss.wsdl&quot;);&lt;br/&gt;
        Client client = JaxWsDynamicClientFactory.newInstance().createClient(wsdl.toExternalForm());&lt;br/&gt;
        Map&amp;lt;String, Object&amp;gt; outProps = new HashMap&amp;lt;String, Object&amp;gt;();&lt;br/&gt;
        outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN&lt;br/&gt;
            + &quot; &quot;&lt;br/&gt;
            + WSHandlerConstants.SIGNATURE&lt;br/&gt;
            + &quot; &quot;&lt;br/&gt;
            + WSHandlerConstants.ENCRYPT&lt;br/&gt;
            + &quot; &quot;&lt;br/&gt;
            + WSHandlerConstants.TIMESTAMP);&lt;br/&gt;
        outProps.put(WSHandlerConstants.TTL_TIMESTAMP, &quot;10&quot;);&lt;br/&gt;
        outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);&lt;br/&gt;
        outProps.put(WSHandlerConstants.SIG_PROP_FILE, _RESOURCES_ROOT + &quot;/client-security/client_security.properties&quot;);&lt;br/&gt;
        outProps.put(WSHandlerConstants.ENC_PROP_FILE, _RESOURCES_ROOT + &quot;/client-security/client_security.properties&quot;);&lt;br/&gt;
        outProps.put(WSHandlerConstants.USER, &quot;clientKeys&quot;); // client private key&lt;br/&gt;
        outProps.put(WSHandlerConstants.ENCRYPTION_USER, &quot;serverKeys&quot;);&lt;br/&gt;
        outProps.put(WSHandlerConstants.PW_CALLBACK_REF, new CallbackHandler() {&lt;br/&gt;
            public void handle(Callback[] callbacks) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {                WSPasswordCallback callback = (WSPasswordCallback) callbacks[0];                if (callback.getIdentifer().equalsIgnoreCase(&amp;quot;clientKeys&amp;quot;)) {
                    callback.setPassword(&quot;clientKeysPassword&quot;); // client private key password
                } else {
                    throw new RuntimeException(&quot;unexpected user id?&quot;);
                }            }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;        });&lt;br/&gt;
        client.getOutInterceptors().add(new WSS4JOutInterceptor(outProps));&lt;br/&gt;
        String ARG_VALUE = &quot;string arg value&quot;;&lt;br/&gt;
        Object[] results = client.invoke(AisTestBackEnd.ONESTRINGARGWSS_ALL_FUNCTION_NAME, new Object[]&lt;/p&gt;
{ARG_VALUE}
&lt;p&gt;);&lt;br/&gt;
        Assert.assertNotNull(results);&lt;br/&gt;
        Assert.assertNotNull(results&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
        Assert.assertTrue(((String) results&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;).indexOf(ARG_VALUE) &amp;gt; 0);&lt;br/&gt;
    }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12780763" author="ggregory@seagullsw.com" created="Fri, 20 Nov 2009 21:13:53 +0000"  >&lt;p&gt;BTW, this worked fine in version 2.1.3 and 2.2.4. It is broken in 2.2.5 and 2.2.6-SNAPSHOT I built out of SVN yesterday.&lt;/p&gt;</comment>
                            <comment id="12780903" author="dkulp" created="Sat, 21 Nov 2009 03:25:55 +0000"  >&lt;p&gt;&lt;br/&gt;
This looks like it might be a bug in wss4j as that element is created in there.   I&apos;ll work with the wss4j folks in early  December to figure out what is going on.&lt;/p&gt;</comment>
                            <comment id="12781250" author="ggregory@seagullsw.com" created="Sun, 22 Nov 2009 23:36:25 +0000"  >&lt;p&gt;You think the problem is in WSS4J even though the version has not changed from 2.2.4 to 2.2.5? So something change someplace else that causes a different usage code path?&lt;/p&gt;</comment>
                            <comment id="12788343" author="dkulp" created="Wed, 9 Dec 2009 22:08:19 +0000"  >
&lt;p&gt;I&apos;m not able to reproduce this.   I used your code (just replaced the wsdl with our hello_world wsdl and used our alice/bob properties/certs and the message is fine:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;wsse:SecurityTokenReference xmlns:wsse=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt; 
&lt;/span&gt;                        xmlns:wsu=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; 
&lt;/span&gt;                        wsu:Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;STRId-BD0861CF2E2E15D46312603962257363&quot;&lt;/span&gt;&amp;gt;
                        &amp;lt;ds:X509Data&amp;gt;
                            &amp;lt;ds:X509IssuerSerial&amp;gt;
                                &amp;lt;ds:X509IssuerName&amp;gt;CN=alice,OU=NOT FOR PRODUCTION USE,O=apache.org&amp;lt;/ds:X509IssuerName&amp;gt;
                                &amp;lt;ds:X509SerialNumber&amp;gt;1185847274&amp;lt;/ds:X509SerialNumber&amp;gt;
                            &amp;lt;/ds:X509IssuerSerial&amp;gt;
                        &amp;lt;/ds:X509Data&amp;gt;
                    &amp;lt;/wsse:SecurityTokenReference&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A single wsu namespace defined.   Any chance of creating a small sample project that fully demonstrates this?&lt;/p&gt;</comment>
                            <comment id="12788348" author="dkulp" created="Wed, 9 Dec 2009 22:12:14 +0000"  >
&lt;p&gt;For the record, to our system test in  systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/security/WSSecurityClientTest.java, I just added:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testWssAll() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        Client client = JaxWsDynamicClientFactory.newInstance().createClient(WSDL_LOC);
        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; outProps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
        outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN
                     + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;
                     + WSHandlerConstants.SIGNATURE
                     + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;
                     + WSHandlerConstants.ENCRYPT
                     + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;
                     + WSHandlerConstants.TIMESTAMP);
        outProps.put(WSHandlerConstants.TTL_TIMESTAMP, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;);
        outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);
        outProps.put(WSHandlerConstants.SIG_PROP_FILE, 
                     &lt;span class=&quot;code-quote&quot;&gt;&quot;org/apache/cxf/systest/ws/security/alice.properties&quot;&lt;/span&gt;);
        outProps.put(WSHandlerConstants.ENC_PROP_FILE, 
                     &lt;span class=&quot;code-quote&quot;&gt;&quot;org/apache/cxf/systest/ws/security/bob.properties&quot;&lt;/span&gt;);
        outProps.put(WSHandlerConstants.USER, &lt;span class=&quot;code-quote&quot;&gt;&quot;alice&quot;&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// client &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; key
&lt;/span&gt;        outProps.put(WSHandlerConstants.ENCRYPTION_USER, &lt;span class=&quot;code-quote&quot;&gt;&quot;bob&quot;&lt;/span&gt;);
        outProps.put(WSHandlerConstants.PW_CALLBACK_REF, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CallbackHandler() {
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void handle(Callback[] callbacks) { 
                WSPasswordCallback callback = (WSPasswordCallback) callbacks[0];
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (callback.getIdentifier().equalsIgnoreCase(&lt;span class=&quot;code-quote&quot;&gt;&quot;alice&quot;&lt;/span&gt;)) { 
                    callback.setPassword(&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;); 
                    &lt;span class=&quot;code-comment&quot;&gt;// client &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; key password 
&lt;/span&gt;                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;unexpected user id?&quot;&lt;/span&gt;); 
                } 
            } 
        });
        client.getOutInterceptors().add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WSS4JOutInterceptor(outProps));
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] results = client.invoke(&lt;span class=&quot;code-quote&quot;&gt;&quot;sayHi&quot;&lt;/span&gt;, 
                                         &lt;span class=&quot;code-quote&quot;&gt;&quot;Dan&quot;&lt;/span&gt;);
        assertNotNull(results);
        assertNotNull(results[0]);
        assertTrue(((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) results[0]).indexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;Dan&quot;&lt;/span&gt;) &amp;gt; 0);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test failed, but that&apos;s cause the server isn&apos;t setup for these properties.   I just looked at the generated soap messages to see what is being sent.&lt;/p&gt;</comment>
                            <comment id="12789126" author="ggregory@seagullsw.com" created="Fri, 11 Dec 2009 05:51:33 +0000"  >&lt;p&gt;An Eclipse project to reproduce the issue. Sample test output is in the doc directory. Tested with 2.2.6 SNAPSHOT from Thu Dec 10 10:20:58 GMT+00:00 2009.&lt;/p&gt;

&lt;p&gt;To see the XML in question in action is rather ugly: run the unit test, the HTTP message with XML is written to the console, then the test times out.&lt;/p&gt;</comment>
                            <comment id="12789532" author="dkulp" created="Fri, 11 Dec 2009 21:07:31 +0000"  >

&lt;p&gt;I still cannot reproduce this.    I took your test case above, unpacked it and modified the .classpath as follows:&lt;/p&gt;

&lt;p&gt;1) C:/Users/ggregory/b/test/apache-cxf-2.2.6-SNAPSHOT  -&amp;gt;   My location of a freshly unpacked 2.2.6 snapshot build&lt;br/&gt;
2) jettison-1.1.jar -&amp;gt; jettison-1.2-20091202.151238-1.jar   ( the current snapshots are using a snapshot of this)&lt;br/&gt;
3) /ThirdParty/JUnit/junit4.7/junit-4.7.jar   -&amp;gt;   a location of a junit 4.5 jar I have on my machine&lt;/p&gt;

&lt;p&gt;I then imported it into eclipse.   I had to change the &quot;JRE System Library&quot; to my default of sun-jdk-1.6.0.17 which is a straight up 1.6.0-17 jdk from Sun with nothing special&lt;/p&gt;

&lt;p&gt;I ran the test and i&apos;m not seeing any duplicated namespaces or anything.&lt;/p&gt;

&lt;p&gt;Thus, my concern is your &quot;Sun 1.6.0 + Apache XML&quot; runtime.   Do you have anything funky in the endorsed dir or something there?   Can you try a fresh download/install of the jdk?&lt;/p&gt;</comment>
                            <comment id="12789541" author="ggregory@seagullsw.com" created="Fri, 11 Dec 2009 21:13:43 +0000"  >&lt;p&gt;Ah, yes, my &quot;funkyness&quot; is as follows for our &quot;Sun 1.6.0 + Apache XML&quot;:&lt;/p&gt;

&lt;p&gt;JRE home: &lt;tt&gt;C:\Program Files\Java\jdk1.6.0_16&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Default VM arguments: &lt;tt&gt;-Djava.endorsed.dirs=C:\Users\ggregory\b\Java\endorsed\latest+jaxb -Dorg.apache.cxf.Logger=org.apache.cxf.common.logging.Log4jLogger&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Where &lt;tt&gt;C:\Users\ggregory\b\Java\endorsed\latest+jaxb&lt;/tt&gt; contains the latest Xalan (2.7.1), Xerces (2.9.1) and JAXB (2.1.12).&lt;/p&gt;

&lt;p&gt;My classpath contains the jars from &lt;tt&gt;C:\Users\ggregory\b\Java\endorsed\latest+jaxb&lt;/tt&gt; before the JRE jars. See attached screen shot.&lt;/p&gt;</comment>
                            <comment id="12789542" author="ggregory@seagullsw.com" created="Fri, 11 Dec 2009 21:15:51 +0000"  >&lt;p&gt;Screen shot.&lt;/p&gt;</comment>
                            <comment id="12789543" author="ggregory@seagullsw.com" created="Fri, 11 Dec 2009 21:20:21 +0000"  >&lt;p&gt;When I change my JRE for the project to a &quot;plain&quot; Sun Java 1.6.0_16, the duplicate namespace declaration is still there.&lt;/p&gt;</comment>
                            <comment id="12789568" author="dkulp" created="Fri, 11 Dec 2009 22:07:32 +0000"  >

&lt;p&gt;Ick.  Then I really have no idea how to reproduce this so I can debug this.   &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;If you have the ability to debug in, the place to look would be:&lt;/p&gt;

&lt;p&gt;StaxUtils.writeStartElement(XMLStreamReader reader, XMLStreamWriter writer)&lt;/p&gt;

&lt;p&gt;and the namespace and attribute handling in there.&lt;/p&gt;</comment>
                            <comment id="12789609" author="ggregory@seagullsw.com" created="Fri, 11 Dec 2009 23:36:33 +0000"  >&lt;p&gt;Sure I can debug... I am now on a plain Sun Java 1.6.0_16 JDK.&lt;/p&gt;

&lt;p&gt;The output XML has 4 * xmlns:wsu and 6 * xmlns:wsse&lt;/p&gt;

&lt;p&gt;In the debugger, in &lt;tt&gt;StaxUtils.writeStartElement(XMLStreamReader reader, XMLStreamWriter writer)&lt;/tt&gt;&lt;br/&gt;
I break at &lt;tt&gt;writer.writeNamespace(nsPrefix, nsURI);&lt;/tt&gt; in:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (nsPrefix.length() == 0) {
                writer.writeDefaultNamespace(nsURI);
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                writer.writeNamespace(nsPrefix, nsURI);
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the debugger I see the &lt;tt&gt;nsPrefix&lt;/tt&gt; variable with the value &lt;tt&gt;&quot;wsse&quot;&lt;/tt&gt; 6 times and &lt;tt&gt;&quot;wsu&quot;&lt;/tt&gt; 4 times. I have a breakpoint condition of &lt;tt&gt;&quot;wsu&quot;.equals(nsPrefix) || &quot;wsse&quot;.equals(nsPrefix)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It sounds like the DOM model is off. Does that make sense?&lt;/p&gt;</comment>
                            <comment id="12789662" author="dkulp" created="Sat, 12 Dec 2009 02:28:47 +0000"  >

&lt;p&gt;If you debug a bit furthur down in the method, there is a block commented &quot;// Write out attributes&quot;.  In there is another writeNamespace call.   Is that one called?&lt;/p&gt;


&lt;p&gt;If so, can you also give me the full class name of the writer.&lt;/p&gt;</comment>
                            <comment id="12789667" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 03:36:59 +0000"  >&lt;p&gt;A breakpoint at:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (writeNs) {
                    writer.writeNamespace(nsPrefix, ns);
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is never hit.&lt;br/&gt;
I am attaching a new version (12/Dec/09 03:38 AM) of the project which looks specifically for multiple &lt;tt&gt;xmlns:wsu&lt;/tt&gt; and  &lt;tt&gt;xmlns:wsse&lt;/tt&gt; in the XML as logged by CXF.&lt;/p&gt;

&lt;p&gt;Can you give it a try please?&lt;/p&gt;</comment>
                            <comment id="12789671" author="dkulp" created="Sat, 12 Dec 2009 03:58:16 +0000"  >
&lt;p&gt;4 wsu and 6 wsse which seems like it is correct.   The XML with that looks correct.&lt;/p&gt;</comment>
                            <comment id="12789673" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 04:08:15 +0000"  >&lt;p&gt;Well, it is not correct for the CXF server side, according to the exception I show in the description for this ticket:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Caused by: com.ctc.wstx.exc.WstxParsingException: Duplicate declaration for namespace prefix &apos;wsu&apos;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Either the client or the server needs a fix. The XML is well-formed according to Eclipse, so this sounds like a bug on the server side. Yes, no?&lt;/p&gt;</comment>
                            <comment id="12789676" author="dkulp" created="Sat, 12 Dec 2009 04:15:48 +0000"  >&lt;p&gt;4 and 6 is correct.    Your message in the original comment has   7 wsu and 6 wsse.      4 wsu is correct.   7 is not.&lt;/p&gt;</comment>
                            <comment id="12789677" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 04:18:12 +0000"  >&lt;p&gt;I was looking at the wrong variable in the debugger in my original message, I edited it with the correct numbers.&lt;/p&gt;

&lt;p&gt;No matter, since I think now that the server side is in error for not accepting this XML.&lt;/p&gt;</comment>
                            <comment id="12789679" author="dkulp" created="Sat, 12 Dec 2009 04:30:32 +0000"  >
&lt;p&gt;the soap message in the log in the description of this bug is DEFINITELY wrong.    It DOES have duplicate wsu prefixes.   The question is how was that message created.   It LOOKS like your test case is not producing the same message as shown in the above log.   That&apos;s what I&apos;m trying to figure out is how was that message created and what could possibly be going wrong to end up with a message like that.   My gut feeling is that the XMLStreamWriter that is being used is different than the one I&apos;m using.  (maybe the sun version built into the JDK or a bea version or something compared to the woodstox version I&apos;m using) and the StaxUtils stuff isn&apos;t behaving correctly with that writer.&lt;/p&gt;

&lt;p&gt;In anycase, I just committed some changes to StaxUtils that may make it work better with a different XMLStreamWriter.   Tomorrows snapshots might behave a little different.&lt;/p&gt;</comment>
                            <comment id="12789687" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 05:08:43 +0000"  >&lt;p&gt;When the prefix is &lt;tt&gt;wsu&lt;/tt&gt; or &lt;tt&gt;wsse&lt;/tt&gt;, the writer is a &lt;tt&gt;SimpleNsStreamWriter&lt;/tt&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;[StreamWriter: class com.ctc.wstx.sw.SimpleNsStreamWriter, underlying outputter: com.ctc.wstx.sw.BufferingXmlWriter@77eec5fe&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="12789693" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 06:16:16 +0000"  >&lt;p&gt;Just for grins, I downloaded the SVN sources, did a build and ran the test. Same deal, wsu is defined 4 times:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;soap:Envelope &lt;span class=&quot;code-keyword&quot;&gt;xmlns:soap&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:xenc&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/04/xmlenc#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;soap:Header&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:Security &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsse&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt; soap:mustUnderstand=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsu:Timestamp &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsu&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; wsu:Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;Timestamp-5&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsu:Created&amp;gt;&lt;/span&gt;2009-12-12T06:14:14.395Z&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsu:Created&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsu:Expires&amp;gt;&lt;/span&gt;2009-12-12T06:14:24.395Z&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsu:Expires&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsu:Timestamp&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:EncryptedKey &lt;span class=&quot;code-keyword&quot;&gt;xmlns:xenc&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/04/xmlenc#&quot;&lt;/span&gt; Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;EncKeyId-0586CC31CF282E94B312605984543355&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:EncryptionMethod Algorithm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/04/xmlenc#rsa-1_5&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:KeyInfo &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ds&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2000/09/xmldsig#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:SecurityTokenReference &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsse&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509Data&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509IssuerSerial&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509IssuerName&amp;gt;&lt;/span&gt;CN=serverKeys&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509IssuerName&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509SerialNumber&amp;gt;&lt;/span&gt;1205178067&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509SerialNumber&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509IssuerSerial&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509Data&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:KeyInfo&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:CipherData&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:CipherValue&amp;gt;&lt;/span&gt;HZ/uzp3RNlJSzhlOahdOYMTai7uGFwJudiUD3aMbVQsC6T4H+KvEXmD//7ByHYSjrg3tba/JWmUyRpgLWEqDMJB9mprHsVs/i4zVOe2Uw+MESVkmpT35Kq05PVenQrqM7zdTWuSWvuDxDml1rBcH/XQ82JCE3muy9PzeHhCYxPg=&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:CipherValue&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:CipherData&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:ReferenceList&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:DataReference URI=&lt;span class=&quot;code-quote&quot;&gt;&quot;#EncDataId-4&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:ReferenceList&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:EncryptedKey&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:Signature &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ds&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2000/09/xmldsig#&quot;&lt;/span&gt; Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;Signature-2&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:SignedInfo&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:CanonicalizationMethod Algorithm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:SignatureMethod Algorithm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:Reference URI=&lt;span class=&quot;code-quote&quot;&gt;&quot;#id-3&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:Transforms&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:Transform Algorithm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:Transforms&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:DigestMethod Algorithm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:DigestValue&amp;gt;&lt;/span&gt;yVtODoPiC9+aUxFYj19IRxHI5fo=&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:DigestValue&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:Reference&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:SignedInfo&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:SignatureValue&amp;gt;&lt;/span&gt;
RDIY/X+KWeofWR0aN5ErYSxs0AOJF9DE+8K+xFZb8VPMSRFO6UBZW/x59KtzvBeUR7nlLk+QGI3G
6O/tz7AAKG9m7Jwkxr/dWZBWXuZNaxid9+Lh7Vx+BOes/KziskHZQyXl60zPouUpyqf1u3EMB3iC
B76Wdy4CfppmhZFyAnA=
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:SignatureValue&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:KeyInfo Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;KeyId-0586CC31CF282E94B312605984535682&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:SecurityTokenReference &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsse&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsu&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; wsu:Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;STRId-0586CC31CF282E94B312605984535703&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509Data&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509IssuerSerial&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509IssuerName&amp;gt;&lt;/span&gt;CN=clientKeys&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509IssuerName&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:X509SerialNumber&amp;gt;&lt;/span&gt;1205178070&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509SerialNumber&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509IssuerSerial&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:X509Data&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:KeyInfo&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:Signature&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:UsernameToken &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsse&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsu&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; wsu:Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;UsernameToken-1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:Username&amp;gt;&lt;/span&gt;clientKeys&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:Username&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:Password Type=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;clientKeysPassword&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:Password&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:UsernameToken&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:Security&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/soap:Header&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;soap:Body &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsu&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; wsu:Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;id-3&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:EncryptedData &lt;span class=&quot;code-keyword&quot;&gt;xmlns:xenc&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/04/xmlenc#&quot;&lt;/span&gt; Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;EncDataId-4&quot;&lt;/span&gt; Type=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/04/xmlenc#Content&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:EncryptionMethod Algorithm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/04/xmlenc#aes128-cbc&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ds:KeyInfo &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ds&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2000/09/xmldsig#&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:SecurityTokenReference &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsse&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsse:Reference &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsse&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&lt;/span&gt; URI=&lt;span class=&quot;code-quote&quot;&gt;&quot;#EncKeyId-0586CC31CF282E94B312605984543355&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ds:KeyInfo&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:CipherData&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xenc:CipherValue&amp;gt;&lt;/span&gt;kc38Jom3dRiZfqkm1Ua9fRtlLESjLu/+aNiwNgmSo1azMY0oKvXZKaRHZfXxJf/K6RsppFxQkhET
elTpjCJMgpsVxrgPz3dWu8C/d7xBjZUkCARK+NP4JLpVEae78mYn7h+9VyqHyqlyDzV/xhVA9Qkq
lDAX47EQjHCBr7sIkLje41jzXfbGtrjbghvYTKAtVYpr/pcbkvbeBcAJPpt7Gqs2Y1e4MN7k1Yq1
McO3gSij/Qp9ZF+Esld/Vakl3MXIFiQxEk58RJTP9USMMcCRZ98FLjboO2XiXPvBX3/PW7FsUwJx
vM/rAav7yoU/kWurWNLpn+TxsT5kAriscUCeXd+0PVn4J9/AEfAKlyjkW+E59+M82Lixp216hvTW
xHGZ7p+bMA/8RBIxNdY2+rjsqF8rwzirtHuraoiNv5su8q6UIMLI/2rwTGJrKGEKPrFseI9T8V3Z
swzKmhgCeqwh08DrwA9BLv5m+A8djfi8KjRL6bs3p+d6wGaz65fPmKd8&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:CipherValue&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:CipherData&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xenc:EncryptedData&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/soap:Body&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12789697" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 06:37:12 +0000"  >&lt;p&gt;BTW, do you get a green or red bar when you run the test in the new version of the project I attached?&lt;/p&gt;</comment>
                            <comment id="12790275" author="dkulp" created="Mon, 14 Dec 2009 18:31:07 +0000"  >
&lt;p&gt;I want to be clear about what the problem really is.   In XML, you can have multiple declarations of the same namespace within the same document.  That&apos;s perfectly fine.  The last soap message you posted is valid with the 4 wsse and 6 wsu declarations.&lt;/p&gt;

&lt;p&gt;The problem in the first soap message is that the wsu namespace is declared twice on the SAME element.   That is NOT allowed.  For example, look at the soap:Body:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&amp;lt;soap:Body &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsu&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; 
                       &lt;span class=&quot;code-keyword&quot;&gt;xmlns:wsu&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&lt;/span&gt; wsu:Id=&lt;span class=&quot;code-quote&quot;&gt;&quot;id-3&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The wsu namespace is defined twice on the same element.   That is bad.  THAT is what I&apos;m trying to figure out how to reproduce.   Your testcase you attached isn&apos;t reproducing that for me (or for you apparently as the last soap message you attached doesn&apos;t have that problem).&lt;/p&gt;

&lt;p&gt;Thus, what we need to figure out is how to create a test case that produces that invalid element.   &lt;/p&gt;</comment>
                            <comment id="12790311" author="ggregory@seagullsw.com" created="Mon, 14 Dec 2009 19:48:56 +0000"  >&lt;p&gt;Ah, right, you are correct. The version of the 2.2.6 snapshot I built works. I tested with the project and with our unit test in our product. So far so good. This seems to have been fixed since I filed the ticket. &lt;/p&gt;

&lt;p&gt;Next I will test the latest snapshot with a full build of our server.&lt;/p&gt;

&lt;p&gt;Is there a release schedule for 2.2.6?&lt;/p&gt;</comment>
                            <comment id="12790315" author="dkulp" created="Mon, 14 Dec 2009 19:53:28 +0000"  >&lt;p&gt;Current plan is mid January for 2.2.6.&lt;/p&gt;</comment>
                            <comment id="12790421" author="ggregory@seagullsw.com" created="Mon, 14 Dec 2009 22:38:22 +0000"  >&lt;p&gt;Closing, should be fixed when 2.2.6 comes out.&lt;/p&gt;</comment>
                            <comment id="12794274" author="mark.brewer@sungardps.com" created="Wed, 23 Dec 2009 23:29:03 +0000"  >&lt;p&gt;I have client code generated with v2.2.4 and on one of the endpoints I&apos;m getting a similar error: Caused by: com.ctc.wstx.exc.WstxParsingException: Duplicate declaration for namespace prefix &apos;tns&apos;.&lt;br/&gt;
 at [row,col &lt;/p&gt;
{unknown-source}
&lt;p&gt;]: &lt;span class=&quot;error&quot;&gt;&amp;#91;1,517&amp;#93;&lt;/span&gt;. Would I be correct in assuming this fix will solve my issue as well?&lt;/p&gt;</comment>
                            <comment id="12794312" author="ggregory@seagullsw.com" created="Thu, 24 Dec 2009 05:36:42 +0000"  >&lt;p&gt;It sure sounds like it. I am using a custom build of 2.2.4 and I have not seen the issue in 2.2.4. I&apos;ve only seen it in 2.2.5 and 2.2.6-SNAPSHOT before Dan&apos;s patch. &lt;/p&gt;

&lt;p&gt;IMO, the issue surfaces depending on the WSDL used by the client code. What it is about the WSDL that makes this happen, I do not know.&lt;/p&gt;</comment>
                            <comment id="12794435" author="mark.brewer@sungardps.com" created="Thu, 24 Dec 2009 14:27:25 +0000"  >&lt;p&gt;Tried creating a client using apache-cxf-2.3.0-SNAPSHOT and am getting the same error. Looks like the 2.2.6 fix hasn&apos;t been applied into 2.3.0 or it doesn&apos;t address the problem I&apos;m having.&lt;/p&gt;</comment>
                            <comment id="12797731" author="dkulp" created="Thu, 7 Jan 2010 18:42:58 +0000"  >&lt;p&gt;Mark, for you, do you have schema validation turned on?  I found a similar duplicate namespace issue on Monday when schema validation was turned on.   That is now fixed on trunk/2.2.x.   Turning off schema validation may fix it for you if that is the case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427811" name="Apache CXF-2554.zip" size="2519054" author="ggregory@seagullsw.com" created="Sat, 12 Dec 2009 03:38:47 +0000"/>
                            <attachment id="12427773" name="Jre16_xml-Capture.JPG" size="132932" author="ggregory@seagullsw.com" created="Fri, 11 Dec 2009 21:15:51 +0000"/>
                            <attachment id="12425655" name="TestBackEndWss.wsdl" size="9650" author="ggregory@seagullsw.com" created="Fri, 20 Nov 2009 19:54:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113964</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14etj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>