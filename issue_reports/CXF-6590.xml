<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:44:02 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6590] MAPCodec: memory leak with sync client when soapfaults returned from endpoint</title>
                <link>https://issues.apache.org/jira/browse/CXF-6590</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;This bug is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2591&quot; title=&quot;MAPCodec : memory leak with an async client with network issues (connection timeout, read timeout etc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-2591&quot;&gt;&lt;del&gt;CXF-2591&lt;/del&gt;&lt;/a&gt; but relates to sync clients.&lt;br/&gt;
A simple client using a service with WS-Addressing which makes repeated calls to a service that returns a soapfault will cause a build up of objects in MAPCodec::uncorrelatedExchanges.&lt;br/&gt;
The real use case is an application using Apache Camel to keep invoking a service that returns a fault (for instance wsa:DestinationUnreachable) using the built in redelivery-functions of Apache Camel.&lt;br/&gt;
A simple CXF client that reproduces the issue has been created. The client just invokes a service in a loop and by observing the used memory (jconsole) and performing memory dumps which can be analyzed using MAT, you can see the issue.&lt;br/&gt;
A standalone wiremock functions as the endpoint.&lt;br/&gt;
The reproducers will be attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CXF 3.0.6, JDK 1.7, CXF 3.1.2&lt;/p&gt;</environment>
        <key id="12863362">CXF-6590</key>
            <summary>MAPCodec: memory leak with sync client when soapfaults returned from endpoint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="bjorn.hilstad">Bj&#248;rn Hilstad</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Sep 2015 11:55:21 +0000</created>
                <updated>Mon, 10 Apr 2017 19:04:33 +0000</updated>
                            <resolved>Tue, 4 Apr 2017 16:55:13 +0000</resolved>
                                    <version>3.0.6</version>
                                    <fixVersion>3.0.13</fixVersion>
                    <fixVersion>3.1.11</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14740678" author="bjorn.hilstad" created="Fri, 11 Sep 2015 12:15:28 +0000"  >&lt;p&gt;Sample client for reproducing and wiremock for stub of service being used by client&lt;/p&gt;</comment>
                            <comment id="14743096" author="bjorn.hilstad" created="Mon, 14 Sep 2015 08:24:53 +0000"  >&lt;p&gt;It seems the problem can be avoided by using RelatesTo in the reply, but a synchronous implementation should be able to handle this scenario without RelatesTo.&lt;/p&gt;</comment>
                            <comment id="15455252" author="bjorn.hilstad" created="Thu, 1 Sep 2016 12:36:45 +0000"  >&lt;p&gt;I verified this fix when it was created and it seemed fine, but it does not actually handle all cases.&lt;br/&gt;
It does not leak memory anymore in the case where the soapfault uses an wsa.Action of &amp;lt;wsa:Action&amp;gt;&lt;a href=&quot;http://www.w3.org/2005/08/addressing/fault&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/08/addressing/fault&lt;/a&gt;&amp;lt;/wsa:Action&amp;gt;.&lt;br/&gt;
But there is still a leak when the soapfault uses a wsa:Action that can be used for non WSA related faults. This is &amp;lt;wsa:Action&amp;gt;&lt;a href=&quot;http://www.w3.org/2005/08/addressing/soap/fault&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/08/addressing/soap/fault&lt;/a&gt;&amp;lt;/wsa:Action&amp;gt; and it is described in the WS-Addressing specification here: &lt;a href=&quot;https://www.w3.org/TR/ws-addr-soap/#faults&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/TR/ws-addr-soap/#faults&lt;/a&gt; . The specification says that this value MAY be used, but you are also allowed to define custom values.&lt;/p&gt;

&lt;p&gt;The same reproducer can be used to trigger this but you need to update the wsa:Action in the response that is sent from the wiremock-part (file __files\altinnunavailable.xml in archive wiremock.zip)&lt;/p&gt;

&lt;p&gt;We have tested againt the latest release of cxf (3.1.7) and the problem is there to. To change CXF versions in the reproducer you just update the property cxf.version in pom.xml (archive cxfoom.zip)&lt;/p&gt;</comment>
                            <comment id="15669918" author="bjorn.hilstad" created="Wed, 16 Nov 2016 09:15:39 +0000"  >&lt;p&gt;I reopened this issue some time ago but I am not sure it has been picked up.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkulp&quot; class=&quot;user-hover&quot; rel=&quot;dkulp&quot;&gt;dkulp&lt;/a&gt;: Will this be fixed or should I create a new case?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12757682">CXF-6116</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12755391" name="cxfoom.zip" size="61812" author="bjorn.hilstad" created="Fri, 11 Sep 2015 12:15:28 +0000"/>
                            <attachment id="12755392" name="wiremock.zip" size="5587147" author="bjorn.hilstad" created="Fri, 11 Sep 2015 12:15:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k1rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>