<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:44:03 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7279] Leaky generic type resolver doesn&apos;t work with more than 1 parameter</title>
                <link>https://issues.apache.org/jira/browse/CXF-7279</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When resource type is generic and declares more than one type parameter and some of other parameters are used as return type together with collection CXF always returns first resource parameter.&lt;/p&gt;

&lt;p&gt;For example resource such this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; DocumentResource&amp;lt;ID, T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Document&amp;lt;ID&amp;gt;&amp;gt; {
    Set&amp;lt;T&amp;gt; getDocuments(ID id);
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DocumentResourceImpl&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Document&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; {
    Set&amp;lt;Document&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; getDocument() {
         &lt;span class=&quot;code-comment&quot;&gt;// just normal implementation
&lt;/span&gt;    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fails miserably with 3.1.9. Reason why it fails is leaky logic in InjectionUtils:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;InjectionUtils.java lines 1451-1455&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TypeVariable&amp;lt;?&amp;gt; typeVar = (TypeVariable&amp;lt;?&amp;gt;)((ParameterizedType)type).getActualTypeArguments()[0];
Type theType = InjectionUtils.getSuperType(serviceCls, typeVar);
&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; cls = theType &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;
    ? (&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;)theType : InjectionUtils.getActualType(theType, 0);
type = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ParameterizedCollectionType(cls);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CXF properly discovers type variables but incorrectly assumes that actual collection bound comes as first type parameter. This leads to assumption that return type is Collection&amp;lt;String&amp;gt; instead of Collection&amp;lt;Document&amp;lt;String&amp;gt;&amp;gt;.&lt;br/&gt;
Sadly I am not able to patch this code myself because (I think) it requires switching completely to generic type names instead of indexes. This part of code is just getting 4 years old and I believe there is few dead bodies there. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;An note here that it used to work with CXF 2.2.7 or some later release thus this seems to be an regression bug.&lt;/p&gt;

&lt;p&gt;I checked how jackson classmate handles that and it manages to resolve all type bounds properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13050195">CXF-7279</key>
            <summary>Leaky generic type resolver doesn&apos;t work with more than 1 parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="ldywicki">&#321;ukasz Dywicki</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Sat, 11 Mar 2017 00:55:21 +0000</created>
                <updated>Mon, 10 Apr 2017 19:04:40 +0000</updated>
                            <resolved>Tue, 14 Mar 2017 16:48:40 +0000</resolved>
                                    <version>3.1.9</version>
                                    <fixVersion>3.1.11</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15905952" author="splatch" created="Sat, 11 Mar 2017 00:55:47 +0000"  >&lt;p&gt;An older issue related to similar bug.&lt;/p&gt;</comment>
                            <comment id="15905961" author="splatch" created="Sat, 11 Mar 2017 01:04:51 +0000"  >&lt;p&gt;An github fork with with test case to reproduce issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12836693">CXF-6450</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3b9qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>