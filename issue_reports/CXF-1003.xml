<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:46:25 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1003] WebFaultOutInterceptor.getFaultMessagePart() might be too draconian and it also has private visibility</title>
                <link>https://issues.apache.org/jira/browse/CXF-1003</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;This implementation of this method is a little draconian (at least to me).  It forces a match on the localPart and the namespace of MessagePartInfo and the fault QName before returning the MessagePartInfo.  In the case of where the exception class annotated with @WebFault (default namespace so it &quot;inherits&quot; the services) is also the fault bean (i.e.: no getFaultInfo method specified) the name of the namespace URI will never match because only mpi&apos;s that are NOT elements are going to be considered.   And since the fault class is a java class, it&apos;s corresponding MPI&apos;s getTypeQName() will always return the namespace corresponding to the package name and NOT the real namespace of the exception (which really lies behind getElementQName()).&lt;/p&gt;

&lt;p&gt;I propose changing this method so that if no MessagePartInfo is found using the current method, we loosen the criteria and return a match based on  the elementQName.  This will also require modification of the MessagePartInfo class.  &lt;/p&gt;

&lt;p&gt;Now the alternate is to make this method public or protected so it can be overridden.  But that&apos;s not really a solution.&lt;/p&gt;

&lt;p&gt;I&apos;m working on a patch but before I upload it I was wondering what the CXF team thought of this&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zarar&lt;/p&gt;

&lt;p&gt;Here&apos;s the method up for review:&lt;/p&gt;

&lt;p&gt;private MessagePartInfo getFaultMessagePart(QName qname, OperationInfo op) {&lt;br/&gt;
	for (FaultInfo faultInfo : op.getFaults()) {&lt;br/&gt;
		for (MessagePartInfo mpi : faultInfo.getMessageParts()) {&lt;br/&gt;
			String ns = null;&lt;br/&gt;
			if (mpi.isElement()) &lt;/p&gt;
{
				ns = mpi.getElementQName().getNamespaceURI();
			}
&lt;p&gt; else &lt;/p&gt;
{
				ns = mpi.getTypeQName().getNamespaceURI();
			}
&lt;p&gt;			if (qname.getLocalPart().equals(mpi.getConcreteName().getLocalPart())&lt;br/&gt;
					&amp;amp;&amp;amp; qname.getNamespaceURI().equals(ns)) &lt;/p&gt;
{
				return mpi;
			}
&lt;p&gt;		}&lt;/p&gt;

&lt;p&gt;	}&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Platform independent.&lt;/p&gt;</environment>
        <key id="12378208">CXF-1003</key>
            <summary>WebFaultOutInterceptor.getFaultMessagePart() might be too draconian and it also has private visibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="zarar">Zarar Siddiqi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2007 21:36:28 +0000</created>
                <updated>Fri, 22 Feb 2008 21:36:55 +0000</updated>
                            <resolved>Fri, 14 Dec 2007 16:19:07 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.0.3</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12527585" author="zarar" created="Fri, 14 Sep 2007 18:02:05 +0000"  >&lt;p&gt;I&apos;ve submitted a patch which scans for a matching MessagePartInfo for a fault if the type&apos;s namespace didn&apos;t match.&lt;/p&gt;

&lt;p&gt;To reproduce this issue all you have to do is the following:&lt;/p&gt;

&lt;p&gt;package com.mycompany.services;&lt;br/&gt;
@WebService(targetNamespace=&quot;http://mycompany.com/MyService&quot;, ...)&lt;br/&gt;
public class MyService ... {&lt;br/&gt;
 public String doSomething() throws WebServiceException &lt;/p&gt;
{...}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;package com.mycompany;&lt;br/&gt;
@WebFault&lt;br/&gt;
public class WebServiceException extends Exception {&lt;br/&gt;
...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Then try calling it....&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Zarar&lt;/p&gt;</comment>
                            <comment id="12527586" author="zarar" created="Fri, 14 Sep 2007 18:02:52 +0000"  >&lt;p&gt;I think this might even be considered a bug...&lt;/p&gt;</comment>
                            <comment id="12528496" author="dkulp" created="Tue, 18 Sep 2007 18:31:07 +0000"  >&lt;p&gt;More thoughts at:&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/Re:-Thoughts-on-CXF-1003-tf4469823.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Re:-Thoughts-on-CXF-1003-tf4469823.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12548725" author="zarar" created="Wed, 5 Dec 2007 16:50:43 +0000"  >&lt;p&gt;Any updates regarding this? I&apos;m surprised more people haven&apos;t run into this because it seems like you can&apos;t use @WebFault without encountering this problem.  Am I missing something?&lt;/p&gt;</comment>
                            <comment id="12548730" author="dkulp" created="Wed, 5 Dec 2007 17:02:14 +0000"  >
&lt;p&gt;Much of this SHOULD be fixed for 2.0.3 and I think a little more for 2.0.4 SNAPSHOT.&lt;/p&gt;
</comment>
                            <comment id="12551844" author="zarar" created="Fri, 14 Dec 2007 16:14:29 +0000"  >&lt;p&gt;I&apos;ve upgraded to 2.0.3 and this issue appears to be fixed.  Thanks everyone.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12365882" name="BetterCheckForAFaultMessagePartInfo.patch" size="2361" author="zarar" created="Fri, 14 Sep 2007 18:02:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>111834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1aat3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268217</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>