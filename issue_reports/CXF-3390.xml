<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:48:08 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3390] Field value from previous request is recycled when field is absent in new request</title>
                <link>https://issues.apache.org/jira/browse/CXF-3390</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;This was tested against 2.3.1 and HEAD.&lt;/p&gt;

&lt;p&gt;Consider this class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/test&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
  @QueryParam(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; q;

  @GET
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err.println(q);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now consider this test case:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ curl http://localhost:8080/test       # prints &quot;null&quot;
$ curl http://localhost:8080/test?q=foo # prints &quot;foo&quot;
$ curl http://localhost:8080/test       # prints &quot;foo&quot; !
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a serious bug because it leaks information. It&apos;s not specific to @QueryParam, the other annotations have the same problem.&lt;/p&gt;

&lt;p&gt;I discovered it in a resource that is used for authentication: after logging in once, I could log in again without providing a username and password!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500964">CXF-3390</key>
            <summary>Field value from previous request is recycled when field is absent in new request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="bnoordhuis">Ben Noordhuis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Mar 2011 00:01:17 +0000</created>
                <updated>Mon, 18 Apr 2011 12:50:22 +0000</updated>
                            <resolved>Thu, 10 Mar 2011 17:40:15 +0000</resolved>
                                    <version>2.4</version>
                                    <fixVersion>2.4</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13004890" author="bnoordhuis" created="Thu, 10 Mar 2011 00:13:03 +0000"  >&lt;p&gt;This bug is caused by the null checks in JAXRSUtils.handleSetters().&lt;/p&gt;

&lt;p&gt;Color diff and raw patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/bnoordhuis/cxf/compare/CXF-3390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bnoordhuis/cxf/compare/CXF-3390&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/bnoordhuis/cxf/compare/CXF-3390.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bnoordhuis/cxf/compare/CXF-3390.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tests and style checks pass.&lt;/p&gt;</comment>
                            <comment id="13005006" author="sergey_beryozkin" created="Thu, 10 Mar 2011 09:37:47 +0000"  >&lt;p&gt;Hi Ben&lt;/p&gt;

&lt;p&gt;I think this issue is invalid.&lt;br/&gt;
Injecting request parameters (as opposed to contexts) is thread-unsafe. Thus this approach only works for per-request resource classes where one can be sure the fields will be properly initialized.&lt;/p&gt;

&lt;p&gt;I think you can just replace use&lt;/p&gt;

&lt;p&gt;@Context UriInfo ui;&lt;/p&gt;

&lt;p&gt;instead and have ui.getQueryParameters().getFirst(&quot;p&quot;) and it will work well. Alternatively pass the QueryParam in the method signature &lt;/p&gt;</comment>
                            <comment id="13005076" author="bnoordhuis" created="Thu, 10 Mar 2011 14:29:21 +0000"  >&lt;p&gt;Thanks for the quick reply, Sergey.&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t expect this to work properly with true singletons but this issue also manifests itself when the resource is thread-local scoped (through a Spring AOP proxy, couldn&apos;t get CXF to wire up request-scoped beans). The resource is thread-safe, CXF can inject to its heart&apos;s desire.&lt;/p&gt;

&lt;p&gt;&amp;gt; Injecting request parameters (as opposed to contexts) is thread-unsafe.&lt;/p&gt;

&lt;p&gt;Agreed. Is there a reason why the runtime allows this? Shouldn&apos;t it complain loudly?&lt;/p&gt;</comment>
                            <comment id="13005145" author="sergey_beryozkin" created="Thu, 10 Mar 2011 16:41:47 +0000"  >&lt;p&gt;Sure - the patch makes more sense to me now, please see&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1080267&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1080267&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m also adding a fine/trace level logging. That is not too loud &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; but at least it can provide the hint...&lt;/p&gt;

&lt;p&gt;By the way, re request-scoped beans, please see:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-FromSpring&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-FromSpring&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="13005171" author="bnoordhuis" created="Thu, 10 Mar 2011 17:15:02 +0000"  >&lt;p&gt;Thanks, Sergey!&lt;/p&gt;

&lt;p&gt;I actually started out with prototype-scoped beans. When that didn&apos;t work I assumed I was doing something wrong and switched first to request and then thread-local scoped beans.&lt;/p&gt;

&lt;p&gt;This is something for another issue, but field values in request-scoped (CGLIB AOP-proxied) beans are always null. Injection apparently fails but I&apos;m not quite sure why. If I have an hour to kill, I&apos;ll try to track down the cause.&lt;/p&gt;

&lt;p&gt;Anyway, consider this issue resolved. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks again!&lt;/p&gt;</comment>
                            <comment id="13005186" author="sergey_beryozkin" created="Thu, 10 Mar 2011 17:29:14 +0000"  >&lt;p&gt;for the injection in CGLIB proxies to work well you might to try injecting via methods, you may want to try introducing a dedicated interface with those setters and the injection should work. Otherwise with Spring mixing all sort of proxies, the field injection probably won&apos;t work &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46837</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>