<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:43:26 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5711] SOAP 1.2 fault reason xml:lang attribute  should follow XML standard</title>
                <link>https://issues.apache.org/jira/browse/CXF-5711</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description></description>
                <environment></environment>
        <key id="12710486">CXF-5711</key>
            <summary>SOAP 1.2 fault reason xml:lang attribute  should follow XML standard</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="irisding">Iris Ding</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Apr 2014 03:18:48 +0000</created>
                <updated>Fri, 11 Jul 2014 12:51:18 +0000</updated>
                            <resolved>Tue, 29 Apr 2014 12:31:16 +0000</resolved>
                                    <version>3.0.0-milestone1</version>
                    <version>2.7.10</version>
                    <version>2.6.14</version>
                                    <fixVersion>3.0</fixVersion>
                    <fixVersion>2.6.15</fixVersion>
                    <fixVersion>2.7.12</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13980659" author="irisding" created="Fri, 25 Apr 2014 03:30:20 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5186&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-5186&lt;/a&gt;, we have a code change to make xml:lang using &quot;&lt;em&gt;&quot; to connect language and country. This caused the  generated soap message is  in &quot;&lt;/em&gt;&quot; format, eg: &quot;en_US&quot;.&lt;/p&gt;

&lt;p&gt;But actually soap message should follow standard XML format and according to :&lt;a href=&quot;http://www.w3.org/International/articles/language-tags/Overview.en.php&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/International/articles/language-tags/Overview.en.php&lt;/a&gt;&lt;br/&gt;
In the Constructing language tags section, it says the lang should be in : language-extlang-script-region-variant-extension-privateuse format , Using &quot;-&quot; as connector.&lt;/p&gt;

&lt;p&gt;SO I propose to modify this back to use &quot;-&quot; as connector.&lt;/p&gt;</comment>
                            <comment id="13980870" author="ay" created="Fri, 25 Apr 2014 10:33:23 +0000"  >
&lt;p&gt;in jdk6, Locale.toString() generates the underscored string (e.g.. en_US).&lt;br/&gt;
in jdk7, there is a method toLanguateTag() that generates the IETF BCP 47 language tag  (eg. en-US).&lt;/p&gt;

&lt;p&gt;so if we correct the tag format to the IETF format, we need to manually do this step to support jdk6.&lt;/p&gt;</comment>
                            <comment id="13983907" author="irisding" created="Tue, 29 Apr 2014 02:40:51 +0000"  >&lt;p&gt;Hi Aki,&lt;/p&gt;

&lt;p&gt;Thanks for looking at this issue.  From my understanding SOAP should follow XML standard no matter it is on JDK6 or JDK7. So we need to change in CXF to use &quot;-&quot; as connector.&lt;br/&gt;
The work flow for this is:&lt;br/&gt;
1. In Server&apos;s OUT Flow, WebFaultOutInterceptor will be called, and we set the language as &quot;en-US&quot; format via:&lt;br/&gt;
            if (sf.getFault().getFaultReasonLocales().hasNext()) {&lt;br/&gt;
                          Locale lang = (Locale) sf.getFault()&lt;br/&gt;
                               .getFaultReasonLocales().next();&lt;br/&gt;
                          String convertedLang = lang.getLanguage();&lt;br/&gt;
                          String country = lang.getCountry();&lt;br/&gt;
                          if (country.length() &amp;gt; 0) &lt;/p&gt;
{
                                convertedLang = convertedLang + &apos;-&apos; + country;
                          }
&lt;p&gt;                          f.setLang(convertedLang);&lt;br/&gt;
                    }&lt;/p&gt;

&lt;p&gt;2. In Server&apos;s OUT Flow, Soap12FaultOutInterceptor is called to marshal the fault as &quot;en-US&quot; format: &lt;br/&gt;
               String lang = f.getLang();&lt;br/&gt;
                if (lang == null || lang.equalsIgnoreCase(&quot;&quot;)) &lt;/p&gt;
{
                    lang = getLangCode();
                }
&lt;p&gt;                writer.writeAttribute(&quot;xml&quot;, &quot;http://www.w3.org/XML/1998/namespace&quot;, &quot;lang&quot;, lang);&lt;/p&gt;

&lt;p&gt;3. In Client&apos;s IN Flow, Soap12FaultInInterceptor is called to unmarshal the fault following &quot;en-US&quot; format:&lt;br/&gt;
                               lang = (String) xu.getValue(&quot;//s:Fault/s:Reason/s:Text/@xml:lang&quot;, &lt;br/&gt;
                                             fault,&lt;br/&gt;
                                             XPathConstants.STRING);&lt;br/&gt;
                               fault.setLang(lang);&lt;/p&gt;

&lt;p&gt;4. IN JaxWsClientProxy.invoke, call stringToLocale() to create a new Locale Object:&lt;br/&gt;
 private static Locale stringToLocale(String locale) {&lt;br/&gt;
        String parts[] = locale.split(&quot;-&quot;, -1);&lt;br/&gt;
        if (parts.length == 1) &lt;/p&gt;
{
            return new Locale(parts[0]);
        }
&lt;p&gt; else if (parts.length == 2) &lt;/p&gt;
{
            return new Locale(parts[0], parts[1]);
        }
&lt;p&gt; else &lt;/p&gt;
{
            return new Locale(parts[0], parts[1], parts[2]);
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;So the patch should work well for both JDK6 and JDK7.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; Best Regards,&lt;br/&gt;
Iris Ding&lt;/p&gt;</comment>
                            <comment id="13984182" author="ay" created="Tue, 29 Apr 2014 10:33:28 +0000"  >&lt;p&gt;Hi Iris,&lt;br/&gt;
it&apos;s all clear. sorry for the delay.&lt;/p&gt;

&lt;p&gt;I needed to discuss with Alessio, whether to keep the old java&apos;s conventional parsing (i.e., accepting the underscore) in the corrected code or to ignore this underscore in the parsing part.&lt;/p&gt;

&lt;p&gt;We decided to drop the conventional parsing (the wrong one) in 3.0.0 but keep it in 2.7.x/2.6.x so that the those newer 2.7.x/2.6.x can interoperate with the older cxf 2.7.x/2.6.x versions that used the java&apos;s conventional parsing&lt;/p&gt;

&lt;p&gt;I&apos;ll commit the patch shortly.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="13984243" author="ay" created="Tue, 29 Apr 2014 12:31:16 +0000"  >&lt;p&gt;applied the patch provided by Iris with a minor modification, where the old parsing behavior (accepting the java&apos;s conventional delimiter) is additionally preserved for 2.7.x and 2.6.x.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="13985065" author="irisding" created="Wed, 30 Apr 2014 01:53:34 +0000"  >&lt;p&gt;Thanks Aki for taking care of this issue! It is a good idea to keep the code more robust.&lt;/p&gt;

&lt;p&gt;Iris&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12641866" name="5711.patch" size="1339" author="irisding" created="Fri, 25 Apr 2014 03:35:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uz2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389055</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>