<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:42:42 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1758] Simple front end does not figure out generic implementation beans.</title>
                <link>https://issues.apache.org/jira/browse/CXF-1758</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The real issue in the description below is that the SimpleFrontEnd is not dealing with an implementation bean like&lt;/p&gt;

&lt;p&gt;MyClass&amp;lt;String&amp;gt; as it must. It isn&apos;t figuring out the actual types, it&apos;s just allowing type erasure to mislead it into treating all instances of the type parameters as Object, which is to say xsd:anyType. This happened to trigger an obscure explosion in the Javascript generator.&lt;/p&gt;

&lt;p&gt;If anyone wants to fix this badly enough, they need to contemplate &lt;/p&gt;

&lt;p&gt;   List&amp;lt;P&amp;gt; doSomething(P someItem)&lt;/p&gt;

&lt;p&gt;in terms of the complexity of the code that will trace that P down there in the list up to the SEB.&lt;/p&gt;



&lt;p&gt;I managed to get a javascript client example working but it barfs in some cases.&lt;/p&gt;

&lt;p&gt;All my server classes are pojos and I am using the simple frontend (I think) with Aegis. I am very pleased with java2java communication since I can pass complex types with no annotations at all.&lt;/p&gt;

&lt;p&gt;The problematic cases are of the form. (All other cases are working with js client)&lt;/p&gt;

&lt;p&gt;public interface Service&amp;lt;T, P&amp;gt; {&lt;br/&gt;
    public int open(P args);&lt;/p&gt;

&lt;p&gt;    public void close(int handle);&lt;/p&gt;

&lt;p&gt;    public int getValue(int handle);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;My guess is it barfs in the generic P type argument.&lt;/p&gt;

&lt;p&gt;When I am trying to do &lt;a href=&quot;http://localhost/ws/SomeService?js&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost/ws/SomeService?js&lt;/a&gt; tomcat produces an error&lt;/p&gt;

&lt;p&gt;Aug 20, 2008 7:14:43 AM org.apache.cxf.transport.servlet.ServletController invoke&lt;br/&gt;
WARNING: org.apache.cxf.javascript.JavascriptQueryHandler Exception caught writing response.&lt;br/&gt;
java.lang.ClassCastException: org.apache.ws.commons.schema.XmlSchemaType cannot be cast to org.apache.ws.commons.schema.XmlSchemaComplexType&lt;br/&gt;
        at org.apache.cxf.javascript.types.SchemaJavascriptBuilder.deserializeElement(SchemaJavascriptBuilder.java:610)&lt;br/&gt;
        at org.apache.cxf.javascript.types.SchemaJavascriptBuilder.domDeserializerFunction(SchemaJavascriptBuilder.java:413)&lt;br/&gt;
        at org.apache.cxf.javascript.types.SchemaJavascriptBuilder.generateCodeForSchema(SchemaJavascriptBuilder.java:102)&lt;br/&gt;
        at org.apache.cxf.javascript.JavascriptQueryHandler.writeResponse(JavascriptQueryHandler.java:135)&lt;br/&gt;
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:152)&lt;br/&gt;
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:174)&lt;br/&gt;
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.doGet(AbstractCXFServlet.java:156)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:244)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)&lt;br/&gt;
        at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:276)&lt;br/&gt;
        at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:262)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.access$0(ApplicationFilterChain.java:192)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:171)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:167)&lt;br/&gt;
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)&lt;br/&gt;
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)&lt;br/&gt;
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)&lt;br/&gt;
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)&lt;br/&gt;
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)&lt;br/&gt;
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)&lt;br/&gt;
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:283)&lt;br/&gt;
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:773)&lt;br/&gt;
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:703)&lt;br/&gt;
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:895)&lt;br/&gt;
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:619)&lt;/p&gt;</description>
                <environment>&lt;p&gt;linux debian stable (etch) tomcat 5.5.20-2etch3&lt;/p&gt;</environment>
        <key id="12402767">CXF-1758</key>
            <summary>Simple front end does not figure out generic implementation beans.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="vasvir">Vassilis Virvilis</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Aug 2008 06:54:51 +0000</created>
                <updated>Mon, 1 Feb 2010 19:02:19 +0000</updated>
                            <resolved>Tue, 15 Dec 2009 14:14:05 +0000</resolved>
                                    <version>2.1.2</version>
                                    <fixVersion>2.2.6</fixVersion>
                                    <component>Simple Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12624515" author="bmargulies" created="Thu, 21 Aug 2008 23:17:48 +0000"  >&lt;p&gt;Are you classes of the form&lt;/p&gt;

&lt;p&gt;class MyClass&amp;lt;P&amp;gt; implements MyInterface&amp;lt;P&amp;gt; {&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;or &lt;/p&gt;

&lt;p&gt;class MyClass implements MyInterface&amp;lt;String&amp;gt; {&lt;br/&gt;
}&lt;br/&gt;
?&lt;/p&gt;</comment>
                            <comment id="12624522" author="bmargulies" created="Thu, 21 Aug 2008 23:40:03 +0000"  >&lt;p&gt;I tried to come up with a test case, but it resolutely refuses to fail. Please actually concoct a failing test case and add it here.&lt;/p&gt;</comment>
                            <comment id="12625371" author="vasvir" created="Mon, 25 Aug 2008 14:23:14 +0000"  >&lt;p&gt;ok&lt;/p&gt;

&lt;p&gt;the interface is&lt;/p&gt;

&lt;p&gt;----------------------&lt;br/&gt;
package com.biovista.ws.iface;&lt;/p&gt;

&lt;p&gt;public interface TestService&amp;lt;P&amp;gt; {&lt;br/&gt;
    public int open(P args);&lt;/p&gt;

&lt;p&gt;    public void close(int handle);&lt;/p&gt;

&lt;p&gt;    public int getValue(int handle);&lt;br/&gt;
}&lt;br/&gt;
----------------------&lt;br/&gt;
The implementation is&lt;br/&gt;
----------------------&lt;br/&gt;
package com.biovista.ws.impl;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.logging.Log;&lt;br/&gt;
import org.apache.commons.logging.LogFactory;&lt;/p&gt;

&lt;p&gt;public class TestService&amp;lt;P&amp;gt; implements com.biovista.ws.iface.TestService&amp;lt;P&amp;gt; {&lt;br/&gt;
    private Log log = LogFactory.getLog(getClass());&lt;/p&gt;

&lt;p&gt;    public void close(int handle) {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    public int getValue(int handle) &lt;/p&gt;
{
        return 2;
    }

&lt;p&gt;    public int open(P args) &lt;/p&gt;
{
        log.info(&quot;args = &quot; + args + &quot; class = &quot; + args.getClass());
        return 0;
    }
&lt;p&gt;}&lt;br/&gt;
----------------------&lt;/p&gt;

&lt;p&gt;it crashes with the same error in tomcat logs when I am requesting&lt;br/&gt;
the javascript client (?js instead of ?wsdl)&lt;/p&gt;

&lt;p&gt;	Vassilis&lt;/p&gt;</comment>
                            <comment id="12625378" author="bmargulies" created="Mon, 25 Aug 2008 14:38:53 +0000"  >&lt;p&gt;Oh, the entire SEI is parameterized! OK, I&apos;ll try THAT.&lt;/p&gt;</comment>
                            <comment id="12625379" author="bmargulies" created="Mon, 25 Aug 2008 14:41:03 +0000"  >&lt;p&gt;Hang on, I don&apos;t understand this. How do you actually use this? What does the spring configuration look like to set up this endpoint? Do you just set the whole business up in Java?&lt;/p&gt;</comment>
                            <comment id="12625493" author="bmargulies" created="Mon, 25 Aug 2008 20:13:20 +0000"  >&lt;p&gt;OK, I&apos;ve got a repro.&lt;/p&gt;</comment>
                            <comment id="12625496" author="bmargulies" created="Mon, 25 Aug 2008 20:20:02 +0000"  >&lt;p&gt;This isn&apos;t a javascript bug, at least not the one you think it is. It&apos;s a simple front end bug, and it may be bigger than I can chase.&lt;/p&gt;

&lt;p&gt;The simple front end is building a schema without using the information about the specialization. It has to, I fear, due to type erasure.&lt;/p&gt;

&lt;p&gt;The service class is SomeGenericClass&amp;lt;String&amp;gt;, but the simple front end doesn&apos;t deal with the generic information, and ends up spitting out an xsd:any particle.&lt;/p&gt;

&lt;p&gt;The javascript code has some support for xsd:any, but not enough to handle this case.  And if the simple front end were working right, there&apos;s be no &apos;any&apos; anywhere.&lt;/p&gt;

&lt;p&gt;I strongly recommend deploying your service via an extra level of non-generic class.&lt;/p&gt;
</comment>
                            <comment id="12625506" author="bmargulies" created="Mon, 25 Aug 2008 20:44:04 +0000"  >&lt;p&gt;This is way too hard for me to tackle.&lt;/p&gt;</comment>
                            <comment id="12790749" author="dkulp" created="Tue, 15 Dec 2009 14:14:05 +0000"  >
&lt;p&gt;This is now somewhat resolved, about as good as we can get it. &lt;/p&gt;

&lt;p&gt;One note:&lt;br/&gt;
You need a concrete bean subclass for this to work.  Thus, something like:&lt;/p&gt;

&lt;p&gt;svrBean.setServiceBean(new TestServiceImpl&amp;lt;String&amp;gt;());&lt;/p&gt;

&lt;p&gt;will not work, but if you do:&lt;/p&gt;

&lt;p&gt;svrBean.setServiceBean(new TestServiceImpl&amp;lt;String&amp;gt;() { })&lt;/p&gt;

&lt;p&gt;It will work as the compiler will generate a subclass that would retain the type information.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10063"><![CDATA[Advanced]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0v2sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>179426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>