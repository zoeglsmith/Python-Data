<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 11:48:07 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5629] In robust one-way fault the fault message is written twice</title>
                <link>https://issues.apache.org/jira/browse/CXF-5629</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have robust one-way operation. However the resulting soap fault is not written to response, because the output stream is closed, as the same &lt;tt&gt;faultObserver&lt;/tt&gt; is called twice:&lt;/p&gt;

&lt;p&gt;1. in &lt;tt&gt;org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(Message)&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isOneWay = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (message.getExchange() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (message.getContent(Exception.class) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        message.getExchange().put(Exception.class, ex2);
    }
    isOneWay = message.getExchange().isOneWay() 
        &amp;amp;&amp;amp; !MessageUtils.isTrue(message.getContextualProperty(Message.ROBUST_ONEWAY));
}

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (faultObserver != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !isOneWay) {
    faultObserver.onMessage(message);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. later in &lt;tt&gt;org.apache.cxf.interceptor.OneWayProcessorInterceptor.handleMessage(Message)&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (message.getContent(Exception.class) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the fault over the response fault channel
&lt;/span&gt;    MessageObserver faultObserver = chain.getFaultObserver();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (faultObserver != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        message.getExchange().setOneWay(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        faultObserver.onMessage(message);
    } 
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, exchage is one-way only in second call, but the soap fault has no change to get to client (output stream is closed).&lt;/p&gt;

&lt;p&gt;I&apos;m working on a patch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12702620">CXF-5629</key>
            <summary>In robust one-way fault the fault message is written twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="ggrzybek">Grzegorz Grzybek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Mar 2014 12:33:13 +0000</created>
                <updated>Fri, 11 Jul 2014 12:50:36 +0000</updated>
                            <resolved>Thu, 20 Mar 2014 20:49:38 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>2.7.11</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13941686" author="gzres" created="Thu, 20 Mar 2014 12:47:33 +0000"  >&lt;p&gt;I&apos;m not sure whether exceptions from one-way robust exchages should be pure &lt;tt&gt;WebServiceException&lt;/tt&gt; or &lt;tt&gt;SOAPFaultException&lt;/tt&gt; if they contain real soap-fault...&lt;/p&gt;</comment>
                            <comment id="13941754" author="githubbot" created="Thu, 20 Mar 2014 14:03:41 +0000"  >&lt;p&gt;GitHub user grgrzybek opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5629&quot; title=&quot;In robust one-way fault the fault message is written twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5629&quot;&gt;&lt;del&gt;CXF-5629&lt;/del&gt;&lt;/a&gt; Do not try to write twice to output stream in robust one-way&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/grgrzybek/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grgrzybek/cxf&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5629&quot; title=&quot;In robust one-way fault the fault message is written twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5629&quot;&gt;&lt;del&gt;CXF-5629&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/1.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4199bf1c6cafedca459603cdc136c7d805226fc5&lt;br/&gt;
Author: Grzegorz Grzybek &amp;lt;gr.grzybek@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-03-20T13:52:05Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5629&quot; title=&quot;In robust one-way fault the fault message is written twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5629&quot;&gt;&lt;del&gt;CXF-5629&lt;/del&gt;&lt;/a&gt; Do not try to write twice to output stream in robust one-way&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="13941759" author="gzres" created="Thu, 20 Mar 2014 14:10:21 +0000"  >&lt;p&gt;Patch included&lt;/p&gt;</comment>
                            <comment id="13941780" author="gzres" created="Thu, 20 Mar 2014 14:44:56 +0000"  >&lt;p&gt;Patch for &lt;tt&gt;2.7.x-fixes&lt;/tt&gt; branch&lt;/p&gt;</comment>
                            <comment id="13942226" author="githubbot" created="Thu, 20 Mar 2014 20:19:52 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12635793" name="CXF-5629-2.7.x.patch" size="5132" author="ggrzybek" created="Thu, 20 Mar 2014 14:44:56 +0000"/>
                            <attachment id="12635788" name="CXF-5629.patch" size="5140" author="ggrzybek" created="Thu, 20 Mar 2014 14:10:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tmy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>