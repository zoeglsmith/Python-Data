<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:43:24 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-790] SOAP headers copied from input SOAPMessage to output SOAPMessage</title>
                <link>https://issues.apache.org/jira/browse/CXF-790</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When a request is made on a server, the SOAP headers in a request appear to be copied directly to the response SOAP message.&lt;/p&gt;

&lt;p&gt;This is pretty severe in the case of WS-Security, because the consumer of the response has to use the header information to &quot;decode&quot; the message, since the security headers contain implicit instructtions for decrypting and verifying signatures on elements in the message (possibly elements in the security header, itself).  Typically, the originator of the request (e.g., the client) does not have the key material to do this decoding.&lt;/p&gt;

&lt;p&gt;One potential solution would be for the security interceptors to strip the SAAJ SOAPMessage of its headers as part of its processing the request, but i) it&apos;s not clear we really want to do that &amp;#8211; subsequent consumers on the interceptor chain, or possibly the application itself, may need this information; ii) furthermore, there&apos;s no guarantee that a security interceptor will be installed in an application, so there are scenarios where such a solution would not be efficacious.&lt;/p&gt;

&lt;p&gt;I would prefer instead that the SOAPMessage representing the response, as it is passed to the outbound interceptor on the server side, be more of a blank slate.&lt;/p&gt;

&lt;p&gt;This probably applies to other WS-* specs that rely on proper processing of SOAP headers.&lt;/p&gt;

&lt;p&gt;A sample CXF program will be enclosed shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12373808">CXF-790</key>
            <summary>SOAP headers copied from input SOAPMessage to output SOAPMessage</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ulhasbhole">Ulhas Bhole</assignee>
                                    <reporter username="fdushin">Fred Dushin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Jul 2007 00:51:55 +0000</created>
                <updated>Wed, 29 Aug 2007 02:02:17 +0000</updated>
                            <resolved>Tue, 31 Jul 2007 13:29:54 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>Soap Binding</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12512663" author="fdushin" created="Sat, 14 Jul 2007 01:04:50 +0000"  >&lt;p&gt;Instructions:&lt;/p&gt;

&lt;p&gt;1. Unpack in a recent CXF kit in the samples directory.&lt;br/&gt;
2. Issue ant build&lt;br/&gt;
3. In a separate window, issue ant server&lt;br/&gt;
4. Issue ant client&lt;/p&gt;

&lt;p&gt;On the server console, you will see the following trace:&lt;/p&gt;

&lt;p&gt;{{{&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; InInterceptor: &amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; &amp;lt;soap:Header xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; &amp;lt;wsse:Security xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; soap:mustUnderstand=&quot;1&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;wsu:Timestamp xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;Timestamp-5896854&quot;&amp;gt;&amp;lt;wsu:Created xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;2007-07-14T00:53:25.251Z&amp;lt;/wsu:Created&amp;gt;&amp;lt;wsu:Expires xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;2007-07-14T00:58:25.251Z&amp;lt;/wsu:Expires&amp;gt;&amp;lt;/wsu:Timestamp&amp;gt;&amp;lt;/wsse:Security&amp;gt;&amp;lt;/soap:Header&amp;gt;&amp;lt;soap:Body xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;sayHi xmlns=&quot;http://apache.org/hello_world_soap_http/types&quot;/&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Executing operation sayHi&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; &lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; OutInterceptor: &amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;soap:Header&amp;gt;&amp;lt;wsse:Security xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; soap:mustUnderstand=&quot;1&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;wsu:Timestamp xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;Timestamp-5896854&quot;&amp;gt;&amp;lt;wsu:Created xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;2007-07-14T00:53:25.251Z&amp;lt;/wsu:Created&amp;gt;&amp;lt;wsu:Expires xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;2007-07-14T00:58:25.251Z&amp;lt;/wsu:Expires&amp;gt;&amp;lt;/wsu:Timestamp&amp;gt;&amp;lt;/wsse:Security&amp;gt;&amp;lt;/soap:Header&amp;gt;&amp;lt;soap:Body&amp;gt;&amp;lt;sayHiResponse xmlns=&quot;http://apache.org/hello_world_soap_http/types&quot;&amp;gt;&amp;lt;responseType&amp;gt;Bonjour&amp;lt;/responseType&amp;gt;&amp;lt;/sayHiResponse&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;br/&gt;
}}}&lt;/p&gt;

&lt;p&gt;Description:&lt;/p&gt;

&lt;p&gt;This scenario is based off the CXF hello world sample, except that 2 interceptors have been added.  On the client side, a WSS interceptor, which adds a WSS Security header with a Timestamp element.  On the server side, a 2 simple interceptors that serialize the input and output DOM structures.  (I might have been able to use logging interceptors, but I implemented these so that they would be closer to the SAAJ interfaces).&lt;/p&gt;

&lt;p&gt;Youll see that no additions are made in the server to the headers.&lt;/p&gt;</comment>
                            <comment id="12512910" author="ulhasbhole" created="Mon, 16 Jul 2007 10:54:43 +0000"  >&lt;p&gt;Hi Fred,&lt;/p&gt;

&lt;p&gt;What you are mentioning &lt;/p&gt;

&lt;p&gt;&quot;I would prefer instead that the SOAPMessage representing the response, as it is passed to the outbound interceptor on the server side, be more of a blank slate. &quot; &lt;/p&gt;

&lt;p&gt;was the original behavior but we try to do it now and it will break out-of-band headers and any application specific headers that were added from service side will be removed even before reaching the other side.&lt;/p&gt;

&lt;p&gt;Every component/module which adds the headers to SOAPMessage should also have a capability to consume it and remove it from the HeaderList while reading. This was never enforced or affected the applications until the Headers were changed from DOM elements to  List and made available to application via. WebServiceContext for application specific out-of-band header. Latter part (of making header list available to application and sending the out-of-band headers back) made this problem visible.&lt;/p&gt;



</comment>
                            <comment id="12516101" author="fdushin" created="Fri, 27 Jul 2007 21:12:44 +0000"  >&lt;p&gt;This patch can be applied to the CXF tree, using the svn-apply perl script from Subversion.&lt;/p&gt;

&lt;p&gt;It adds a system test into ws/security, for testing round-trip message protection.  The test will fail on the response side, until we address &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-790&quot; title=&quot;SOAP headers copied from input SOAPMessage to output SOAPMessage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-790&quot;&gt;&lt;del&gt;CXF-790&lt;/del&gt;&lt;/a&gt; (either in general, or specifically in the WSS4JInInterceptor)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12374438">CXF-826</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12374439">CXF-827</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12361824" name="CXF-790.tar.gz" size="5751" author="fdushin" created="Sat, 14 Jul 2007 01:04:50 +0000"/>
                            <attachment id="12362706" name="cxf-790-testcase.patch" size="32863" author="fdushin" created="Fri, 27 Jul 2007 21:12:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>111629</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uxtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>