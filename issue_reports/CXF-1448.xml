<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:45:04 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1448] Aegis + SAAJ leads to namespace complaint.</title>
                <link>https://issues.apache.org/jira/browse/CXF-1448</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
I am getting &quot;Error initializing parameters for operation&quot; from Aegis.  I set it up through Spring.  My classes mostly just use String, so I&apos;m not sure what the problem is.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Ben &lt;/p&gt;</description>
                <environment>&lt;p&gt;I am running WebLogic 9.2.2 on Windows XP&lt;/p&gt;</environment>
        <key id="12389323">CXF-1448</key>
            <summary>Aegis + SAAJ leads to namespace complaint.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="chengas123">Ben McCann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Feb 2008 14:59:00 +0000</created>
                <updated>Wed, 30 Apr 2008 15:00:06 +0000</updated>
                            <resolved>Tue, 4 Mar 2008 21:16:54 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.0.5</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12571433" author="chengas123" created="Fri, 22 Feb 2008 15:04:32 +0000"  >&lt;p&gt;cxf.xml - The server&apos;s Spring configuration file&lt;/p&gt;</comment>
                            <comment id="12571434" author="chengas123" created="Fri, 22 Feb 2008 15:08:35 +0000"  >&lt;p&gt;My main bean class.  It contains a few other custom classes, which only contain Strings.&lt;/p&gt;</comment>
                            <comment id="12571435" author="chengas123" created="Fri, 22 Feb 2008 15:10:50 +0000"  >&lt;p&gt;I do not have an aegis.xml file as it is my understanding that is not needed for simple classes.&lt;/p&gt;</comment>
                            <comment id="12571753" author="bmargulies" created="Sat, 23 Feb 2008 16:23:13 +0000"  >&lt;p&gt;OK, I just want to make sure that I had all the details.&lt;/p&gt;</comment>
                            <comment id="12571754" author="bmargulies" created="Sat, 23 Feb 2008 16:32:52 +0000"  >&lt;p&gt;This is going to turn out to have something to do with the Set&amp;lt;&amp;gt; in Employee, I bet.&lt;/p&gt;</comment>
                            <comment id="12571764" author="chengas123" created="Sat, 23 Feb 2008 16:57:11 +0000"  >&lt;p&gt;I thought I&apos;d confirm your hypothesis.  Unfortunately, that&apos;s not the case because this version of my class is throwing the same error.&lt;/p&gt;</comment>
                            <comment id="12571768" author="bmargulies" created="Sat, 23 Feb 2008 17:39:56 +0000"  >&lt;p&gt;I see your problem. You need a .aegis.xml file to tell Aegis what&apos;s inside your raw &apos;Set&apos; object.&lt;/p&gt;

&lt;p&gt;Or you need to declare it as Set&amp;lt;Something&amp;gt;&lt;/p&gt;

&lt;p&gt;Here&apos;s an example ...&lt;/p&gt;

&lt;p&gt;&amp;lt;mappings&amp;gt;&lt;br/&gt;
	&amp;lt;mapping&amp;gt;&lt;br/&gt;
		&amp;lt;method name=&quot;getUnannotatedStrings&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;return-type name=&quot;UnannotatedStringCollection&quot; componentType=&quot;java.lang.String&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;/method&amp;gt;&lt;br/&gt;
	&amp;lt;/mapping&amp;gt;&lt;br/&gt;
&amp;lt;/mappings&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12571769" author="bmargulies" created="Sat, 23 Feb 2008 17:48:13 +0000"  >&lt;p&gt;I did make a fix. There was a bug that threw away the explanatory error message you should have received, and I fixed that.&lt;/p&gt;</comment>
                            <comment id="12571772" author="chengas123" created="Sat, 23 Feb 2008 18:02:31 +0000"  >&lt;p&gt;I don&apos;t think the problem is anything to do with the Set because I commented out the Set and still got the same error.&lt;/p&gt;</comment>
                            <comment id="12571775" author="bimargulies@gmail.com" created="Sat, 23 Feb 2008 18:31:20 +0000"  >&lt;p&gt;Which set? The naked set or the one in employee? It&apos;s the naked set which&lt;br/&gt;
causes the problem.&lt;/p&gt;

&lt;p&gt;Humor me. Add a .aegis.xml file to specify the content type of your set.&lt;br/&gt;
It&apos;s not supposed to work without it.&lt;/p&gt;</comment>
                            <comment id="12571785" author="chengas123" created="Sat, 23 Feb 2008 20:16:33 +0000"  >&lt;p&gt;Oh yes.  Quite right.  I totally forgot about the naked Set for a moment.&lt;br/&gt;
I commented that one out too and am getting a new error now:&lt;br/&gt;
&quot;java.lang.IllegalArgumentException: The uri may not be theempty string.&quot;&lt;/p&gt;

&lt;p&gt;I appreciate your help.  I&apos;ve had a few people asking about implementing Aegis on my blog (&lt;a href=&quot;http://www.lumidant.com/blog/web-services-tutorial-with-apache-cxf/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.lumidant.com/blog/web-services-tutorial-with-apache-cxf/&lt;/a&gt;) and think it will be good to get a working example to share with the community.&lt;/p&gt;

&lt;p&gt;Thanks so much,&lt;br/&gt;
Ben&lt;/p&gt;</comment>
                            <comment id="12571908" author="bmargulies" created="Sun, 24 Feb 2008 15:46:01 +0000"  >&lt;p&gt;OK, then, how about a backtrace for that? Your class is really boring without the Set, so I could use some more traction.&lt;/p&gt;</comment>
                            <comment id="12571909" author="bmargulies" created="Sun, 24 Feb 2008 15:46:53 +0000"  >&lt;p&gt;Sorry, I see you added it. What operation were you running when it produced that backtrace?&lt;/p&gt;</comment>
                            <comment id="12571916" author="chengas123" created="Sun, 24 Feb 2008 17:36:22 +0000"  >&lt;p&gt;It happened when the client ran getEmployeeByGid&lt;/p&gt;</comment>
                            <comment id="12571917" author="bmargulies" created="Sun, 24 Feb 2008 18:12:30 +0000"  >&lt;p&gt;This has something to do with namespaces.  Are there any snails (@) on you AuthService interface?&lt;/p&gt;

&lt;p&gt;It would obviously be most efficient if you could attach a complete (non)working example, but I&apos;ll settle for your entire garden of annotations.&lt;/p&gt;</comment>
                            <comment id="12571925" author="chengas123" created="Sun, 24 Feb 2008 18:42:31 +0000"  >&lt;p&gt;Ok.  I attached the interface and implementation.  There are a few annotations, but they&apos;re really just the ones specified in the CXF docs.&lt;/p&gt;</comment>
                            <comment id="12571926" author="bmargulies" created="Sun, 24 Feb 2008 18:43:54 +0000"  >&lt;p&gt;No snails at all! OK, I&apos;ll set up a test case and see if I can make it whimper for me. But first I need to go take a walk.&lt;/p&gt;

&lt;p&gt;BTW, Aegis has historically gotten a lot more exercise with the &apos;Simple&apos; front end than with JAX-WS. You might find that you get off the ground faster while  you wait for me or whomever to get to the bottom of this charming muddle.&lt;/p&gt;</comment>
                            <comment id="12571937" author="bmargulies" created="Sun, 24 Feb 2008 20:14:23 +0000"  >&lt;p&gt;Staring at your backtrace, I see something. I actually see a couple of things.&lt;/p&gt;

&lt;p&gt;The exception is being thrown by a weblogic class, which is complaining that you can&apos;t get a prefix for an empty namespace. I&apos;m not sure that they are correct.&lt;/p&gt;

&lt;p&gt;Still, I also can&apos;t repro the empty namespace. When I breakpoint in the ElementWriter, we&apos;ve always got one. I don&apos;t see any reason why I should have any more namespaces than you have if, indeed, you have no .aegis.xml files.&lt;/p&gt;

&lt;p&gt;Meanwhile, it also looks to me as if you have the org.apache.cxf.aegis.databinding.AegisServiceConfiguration on your server and not on your client. This can lead to namespace mismatches, as all it does is add / characters to default namespaces. I recommend not using it at all, but if  you must, use it on both ends.&lt;/p&gt;

&lt;p&gt;Are you willing to set up a CXF build at set a breakpoint? Or to download a 2.1 snapshot? I&apos;m debugging against the 2.1 trunk.&lt;/p&gt;
</comment>
                            <comment id="12571947" author="bmargulies" created="Sun, 24 Feb 2008 20:26:56 +0000"  >&lt;p&gt;It is also hypothetically possible that your password callback has something to do with this. Please try turning it off just to exclude that possibility.&lt;/p&gt;
</comment>
                            <comment id="12571958" author="bmargulies" created="Sun, 24 Feb 2008 21:15:24 +0000"  >&lt;p&gt;I cannot repro this in the 2.0.x branch or the 2.1 branch. &lt;/p&gt;

&lt;p&gt;Possibilities:&lt;/p&gt;

&lt;p&gt;1: related to the password callback, somehow (I don&apos;t believe it).&lt;br/&gt;
2: related to weblogic&lt;br/&gt;
3: I&apos;m missing something.&lt;/p&gt;

&lt;p&gt;I invite you to cook up a version of this that runs completely outside of weblogic. I particularly invite you to checkout a tree and try to modify org.apache.cxf.systest.aegis.AegisJaxWsTest.java until it fails. Or at least have a look and see if you can see in what respect your code differs from my test case.&lt;/p&gt;</comment>
                            <comment id="12571998" author="chengas123" created="Mon, 25 Feb 2008 01:35:22 +0000"  >&lt;p&gt;I have ruled out the password callback.  It is still broken with that taken out. &lt;br/&gt;
It could be WebLogic (free download at &lt;a href=&quot;http://commerce.bea.com/showproduct.jsp?family=WLS&amp;amp;major=10&amp;amp;minor=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commerce.bea.com/showproduct.jsp?family=WLS&amp;amp;major=10&amp;amp;minor=1&lt;/a&gt;) since it has already caused me numerous headaches with CXF.  &lt;br/&gt;
I will investigate more tomorrow.&lt;/p&gt;</comment>
                            <comment id="12572000" author="bmargulies" created="Mon, 25 Feb 2008 02:09:51 +0000"  >&lt;p&gt;It&apos;s not hard to get out of weblogic for a test. You can follow the pattern of CXF&apos;s unit tests without much trouble. or you could just try to deploy in some harmless alternative like Jetty, at least for a comparison.&lt;/p&gt;</comment>
                            <comment id="12572150" author="chengas123" created="Mon, 25 Feb 2008 18:27:33 +0000"  >&lt;p&gt;I got this up and running on JBoss.  It&apos;s better than WebLogic in that I don&apos;t get the &quot;The uri may not be theempty string.&quot; error, but doesn&apos;t work completely yet.  I get back my employee, but when I call employee.getLastName() in my jUnit test it returns null.  Works okay on both JBoss and WebLogic without Aegis.&lt;br/&gt;
You said you suggested not using the AegisServiceConfiguration.  If I take that out I can still use the Aegis databinding without any problems, correct?  (I tried taking it out and it didn&apos;t affect either JBoss or WebLogic)  I&apos;m afraid I don&apos;t know much about Aegis, and just took this from the CXF docs.&lt;/p&gt;</comment>
                            <comment id="12572157" author="bmargulies" created="Mon, 25 Feb 2008 18:50:27 +0000"  >&lt;p&gt;If you read what I just added to confluence, you&apos;ll see that AegisServiceConfiguration changes the rules for mapping from packages to URLs. You never \have/ to use it unless you are trying to be compatible with an XFire &apos;other end&apos;. If you \do/ use it, you must use it on \both/ ends. I bet you only have it on one end, because the doc (which I fixed yesterday) essentially led you to do so.&lt;/p&gt;</comment>
                            <comment id="12572205" author="chengas123" created="Mon, 25 Feb 2008 20:13:56 +0000"  >&lt;p&gt;Thanks Benson.  The docs are much clearer now and I have updated my Spring file to match your example.  You have been a real help.  The portion of the Spring file on Confluence that you commented is in there twice, so one of them can probably be removed.&lt;br/&gt;
It appears the problem of &quot;The uri may not be theempty string.&quot; does happen only on WebLogic.&lt;/p&gt;

&lt;p&gt;JBoss is returning null last name for the employee, but I can see in the logs that it is being transmitted.  Maybe this is a namespace issue?&lt;/p&gt;

&lt;p&gt;Payload with Aegis: &amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;soap:Body&amp;gt;&amp;lt;ns1:getEmployeeByGidResponse xmlns:ns1=&quot;http://service.auth.sd.sherwin.com/&quot;&amp;gt;&amp;lt;return&amp;gt;&amp;lt;ns2:department xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot; xmlns:ns3=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; ns3:nil=&quot;true&quot; /&amp;gt;&amp;lt;ns2:domain xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot; xmlns:ns3=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; ns3:nil=&quot;true&quot; /&amp;gt;&amp;lt;ns2:eid xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;411990625&amp;lt;/ns2:eid&amp;gt;&amp;lt;ns2:email xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;benjamin.j.mccann@sherwin.com&amp;lt;/ns2:email&amp;gt;&amp;lt;ns2:firstName xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;Benjamin&amp;lt;/ns2:firstName&amp;gt;&amp;lt;ns2:gid xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;0223938&amp;lt;/ns2:gid&amp;gt;&amp;lt;ns2:lastName xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;McCann&amp;lt;/ns2:lastName&amp;gt;&amp;lt;ns2:middleInitial xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;J&amp;lt;/ns2:middleInitial&amp;gt;&amp;lt;ns2:name xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;Benjamin J McCann&amp;lt;/ns2:name&amp;gt;&amp;lt;ns2:nickName xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot; xmlns:ns3=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; ns3:nil=&quot;true&quot; /&amp;gt;&amp;lt;ns2:userId xmlns:ns2=&quot;http://bean.auth.sd.sherwin.com&quot;&amp;gt;BJM733&amp;lt;/ns2:userId&amp;gt;&amp;lt;/return&amp;gt;&amp;lt;/ns1:getEmployeeByGidResponse&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;Payload without Aegis: &amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&amp;lt;soap:Body&amp;gt;&amp;lt;ns1:getEmployeeByGidResponse xmlns:ns1=&quot;http://service.auth.sd.sherwin.com/&quot;&amp;gt;&amp;lt;return&amp;gt;&amp;lt;eid&amp;gt;411990625&amp;lt;/eid&amp;gt;&amp;lt;email&amp;gt;benjamin.j.mccann@sherwin.com&amp;lt;/email&amp;gt;&amp;lt;firstName&amp;gt;Benjamin&amp;lt;/firstName&amp;gt;&amp;lt;gid&amp;gt;0223938&amp;lt;/gid&amp;gt;&amp;lt;lastName&amp;gt;McCann&amp;lt;/lastName&amp;gt;&amp;lt;middleInitial&amp;gt;J&amp;lt;/middleInitial&amp;gt;&amp;lt;userId&amp;gt;BJM733&amp;lt;/userId&amp;gt;&amp;lt;/return&amp;gt;&amp;lt;/ns1:getEmployeeByGidResponse&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12572214" author="bmargulies" created="Mon, 25 Feb 2008 20:27:54 +0000"  >&lt;p&gt;Just the last name? The rest of the employee is fine? &lt;/p&gt;

&lt;p&gt;I&apos;ll have a look around tonight.&lt;/p&gt;</comment>
                            <comment id="12572237" author="chengas123" created="Mon, 25 Feb 2008 21:07:45 +0000"  >&lt;p&gt;No.  Sorry, I should have been clearer.  All the properties I have looked at seem to be null: first name, last name, gid.   However, the employee itself is not null because if I print it out I get com.sherwin.sd.auth.bean.Employee@dc4c81&lt;/p&gt;</comment>
                            <comment id="12572323" author="bmargulies" created="Tue, 26 Feb 2008 00:46:20 +0000"  >&lt;p&gt;Could you humor me and turn off both of your interceptors?&lt;/p&gt;
</comment>
                            <comment id="12572332" author="bmargulies" created="Tue, 26 Feb 2008 01:12:31 +0000"  >&lt;p&gt;I&apos;ve further updated the doc to stop pushing people to use JAX-WS when the simple front end would be, well, simpler. You could also try that.&lt;/p&gt;</comment>
                            <comment id="12572333" author="bmargulies" created="Tue, 26 Feb 2008 01:13:10 +0000"  >&lt;p&gt;I am also getting curious about your client setup, if you stick with JAX-WS.&lt;/p&gt;</comment>
                            <comment id="12572582" author="dkulp" created="Tue, 26 Feb 2008 18:09:41 +0000"  >
&lt;p&gt;Ben,&lt;/p&gt;

&lt;p&gt;From those soap  messages, this looks like a qualification issue.   JAX-WS+JAXB, by default, generates unqualified schemas.   Thus, the elements in the messages are not namespace qualified.   &lt;/p&gt;

&lt;p&gt;Aegis, on the other hand ALWAYS expects and generates QUALIFIED schemas.   Thus, for the Aegis version, there are namespaces there. &lt;/p&gt;


&lt;p&gt;For Aegis, it will always only deal with qualified.   There isn&apos;t a way to control that right now.   For jaxb, the easiest way to flip it to using qualified is to add package-info.java files in all the packages that have jaxb beans that contains something like:&lt;/p&gt;

&lt;p&gt;@javax.xml.bind.annotation.XmlSchema(&lt;br/&gt;
        namespace = &quot;http://annuaire.ciss.lu&quot;, &lt;br/&gt;
     elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)&lt;br/&gt;
package lu.ciss.annuaire;&lt;/p&gt;</comment>
                            <comment id="12572592" author="chengas123" created="Tue, 26 Feb 2008 18:32:40 +0000"  >&lt;p&gt;I tried using the simple front end, but there is something else missing from the docs.  I&apos;m getting: &apos;The prefeix &quot;simple&quot; for element &quot;simple:server&quot; is not bound&apos;.&lt;/p&gt;</comment>
                            <comment id="12573051" author="chengas123" created="Wed, 27 Feb 2008 19:53:18 +0000"  >&lt;p&gt;I found the simple server xmlns and added that to get a bit further, but it looks like I can&apos;t have security on that, so I went back to the JAX-WS and got that working now!  &lt;br/&gt;
I guess I didn&apos;t realize that Aegis would have to be implemented on both ends, though it makes sense.  And I&apos;m sure JAXB could probably be used on one end still, but that seems like it&apos;s be extra work and I don&apos;t have any reason to.&lt;br/&gt;
Not out of the woods yet though!   If I try using WS-Security with Aegis I get an error, which I am attaching the stack trace for.&lt;/p&gt;</comment>
                            <comment id="12573064" author="bmargulies" created="Wed, 27 Feb 2008 20:54:27 +0000"  >&lt;p&gt;To use JAXB on the client, you have to:&lt;/p&gt;

&lt;p&gt;1) Stand up the server with Aegis.&lt;br/&gt;
2) Pull wsdl using the ?wsdl URL. In 2.1 you can do it with java2ws.&lt;br/&gt;
3) Use wsdl2java to build your client.&lt;/p&gt;</comment>
                            <comment id="12573070" author="chengas123" created="Wed, 27 Feb 2008 21:17:14 +0000"  >&lt;p&gt;Alright, I suppose that&apos;s good to know, but I&apos;m fine using Aegis.  It seems to me to be much easier.  &lt;br/&gt;
Aegis and WS-Security should function together, correct?  I just have to figure out why SAAJ is giving me: Error at Line:0 Prefix &lt;span class=&quot;error&quot;&gt;&amp;#91;ns2&amp;#93;&lt;/span&gt; used without binding it to a namespace URI&lt;/p&gt;</comment>
                            <comment id="12573345" author="bmargulies" created="Thu, 28 Feb 2008 16:27:35 +0000"  >&lt;p&gt;Ben,&lt;/p&gt;

&lt;p&gt;Far and away, it would work best if you could produce a bounded, repro of your issue using the same components that we use.&lt;/p&gt;

&lt;p&gt;In particular, Stax and not BEA for XML processing.&lt;/p&gt;

&lt;p&gt;If you really can&apos;t do that, you can turn on full logging, and I can try to make some sense of the situation.&lt;/p&gt;

&lt;p&gt;I&apos;m sorry to disappoint, but I don&apos;t think that any of us have the bandwidth to set up BEA components and make test cases.&lt;/p&gt;

&lt;p&gt;If it&apos;s any consolation, before I was a committer I spent many happy hours turning mushy problems into small test cases shaped like CXF unit tests.&lt;/p&gt;

&lt;p&gt;-benson&lt;/p&gt;</comment>
                            <comment id="12573349" author="chengas123" created="Thu, 28 Feb 2008 16:50:08 +0000"  >&lt;p&gt;Sure Benson.  I understand.&lt;br/&gt;
However, I&apos;m having the same problem using Aegis and WS-Security together on JBoss as well with SAAJ giving me: Error at Line:0 Prefix &lt;span class=&quot;error&quot;&gt;&amp;#91;ns2&amp;#93;&lt;/span&gt; used without binding it to a namespace URI&lt;/p&gt;</comment>
                            <comment id="12573361" author="dkulp" created="Thu, 28 Feb 2008 17:15:17 +0000"  >&lt;p&gt;Ben,&lt;/p&gt;

&lt;p&gt;I sent a note to Benson that described some extra stuff that would be useful to help debug this.   Basically:&lt;/p&gt;

&lt;p&gt;1) Can you add the Logging interceptor to the servers side in chain?  (client side chains would be nice too)  If we can see the faulty soap message, we can then at least tell if its the client sending a bad message or the server having problems parsing it.&lt;/p&gt;

&lt;p&gt;2) On the server side, could you NOT add the ws-security stuff and just add the SAAJInInterceptor and see if the problem remains.  The stack trace implies that it should still be problematic.   This plus the soap message would be a huge step in helping to debug it as it removes the ws-security complexities.&lt;/p&gt;

&lt;p&gt;As Benson said, though, a full test case in a nice zip with either an ant build.xml or maven pom (can use jetty:run or something) that shows the issue with a simple war in tomcat or standalone would be a HUGE help.   Once we have a simple, completely reproducable test case, these fixes are NORMALLY fairly quick to fix.   It&apos;s creating the test case that&apos;s the hard part as we don&apos;t know exactly what you are doing, how you have things configured, etc...&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12573387" author="bmargulies" created="Thu, 28 Feb 2008 18:12:34 +0000"  >&lt;p&gt;OK, well, can I have, at least, (a) a backtrace from inside JBoss, and (b) XML messages from the logging feature?&lt;/p&gt;</comment>
                            <comment id="12573391" author="chengas123" created="Thu, 28 Feb 2008 18:24:21 +0000"  >&lt;p&gt;Sure.  See jboss.log and junit.log.  Hopefully they will provide what you need.&lt;/p&gt;</comment>
                            <comment id="12573393" author="dkulp" created="Thu, 28 Feb 2008 18:28:43 +0000"  >&lt;p&gt;&amp;lt;ns1:getEmployeeByGid xmlns:ns1=&quot;http://service.auth.sd.sherwin.com/&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;ns2:gid&amp;gt;0223938&amp;lt;/ns2:gid&amp;gt;&lt;br/&gt;
    &amp;lt;ns2:appLookupKey&amp;gt;sos&amp;lt;/ns2:appLookupKey&amp;gt;&lt;br/&gt;
&amp;lt;/ns1:getEmployeeByGid&amp;gt;&lt;/p&gt;

&lt;p&gt;Well, what do you know.   Definitely a bug.   No decl for ns2.      This seems to be a client side thing while writing the request.&lt;/p&gt;


</comment>
                            <comment id="12573465" author="chengas123" created="Thu, 28 Feb 2008 21:37:39 +0000"  >&lt;p&gt;Test case sent to bimargulies &amp;amp; dkulp @ apache  (Too big to upload)&lt;/p&gt;</comment>
                            <comment id="12573468" author="chengas123" created="Thu, 28 Feb 2008 21:44:58 +0000"  >&lt;p&gt;Email rejected as spam (I&apos;m not sure who&apos;s side).  Do you have another address I could try send to?&lt;/p&gt;</comment>
                            <comment id="12573482" author="dkulp" created="Thu, 28 Feb 2008 22:05:13 +0000"  >&lt;p&gt;&lt;br/&gt;
You can send it directly to me at dan at dankulp.com&lt;/p&gt;</comment>
                            <comment id="12573802" author="dkulp" created="Fri, 29 Feb 2008 16:01:51 +0000"  >
&lt;p&gt;It&apos;s a bug in the Aegis ElementWriter.writeStartElement code.   It&apos;s not checking to see if the &quot;namespace&quot; is empty before deciding on the prefix to use.   Thus, right now, it ends up calling:&lt;/p&gt;

&lt;p&gt;writer.writeStartElement(&quot;ns2&quot;, &quot;gui&quot;, &quot;&quot;);&lt;/p&gt;

&lt;p&gt;Woodstox and the other XMLStreamWriters seem to ignore the prefix if the namespace is empty like that.  The SAAJ DOM doesn&apos;t do you end up with &amp;lt;ns2:gid&amp;gt; instead of just &amp;lt;gid&amp;gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed that in the writer.&lt;/p&gt;
</comment>
                            <comment id="12575144" author="bmargulies" created="Tue, 4 Mar 2008 21:08:56 +0000"  >&lt;p&gt;Dan was last seen in the neighborhood of the latest aspect of this.&lt;/p&gt;</comment>
                            <comment id="12587798" author="wliaw" created="Thu, 10 Apr 2008 21:57:01 +0000"  >&lt;p&gt;I still get&lt;br/&gt;
  java.lang.IllegalArgumentException: The uri may not be theempty string.&lt;br/&gt;
in WebLogic. And I found&lt;/p&gt;

&lt;p&gt;The fix is not checking for empty namespace in writeStartElement. It is better to replace&lt;br/&gt;
    if (namespace != null) {&lt;br/&gt;
by&lt;br/&gt;
    if (namespace != null &amp;amp;&amp;amp; namespace.length &amp;gt; 0) {&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12376357" name="AuthService.java" size="1093" author="chengas123" created="Sun, 24 Feb 2008 18:41:28 +0000"/>
                            <attachment id="12376356" name="AuthServiceImpl.java" size="1692" author="chengas123" created="Sun, 24 Feb 2008 18:40:31 +0000"/>
                            <attachment id="12376234" name="AuthServiceImpl.java" size="1432" author="chengas123" created="Fri, 22 Feb 2008 15:09:35 +0000"/>
                            <attachment id="12376312" name="Employee.java" size="4120" author="chengas123" created="Sat, 23 Feb 2008 16:57:11 +0000"/>
                            <attachment id="12376233" name="Employee.java" size="3984" author="chengas123" created="Fri, 22 Feb 2008 15:08:35 +0000"/>
                            <attachment id="12376231" name="cxf.xml" size="2184" author="chengas123" created="Fri, 22 Feb 2008 15:04:32 +0000"/>
                            <attachment id="12376751" name="jboss.log" size="12832" author="chengas123" created="Thu, 28 Feb 2008 18:23:33 +0000"/>
                            <attachment id="12376752" name="junit.log" size="15090" author="chengas123" created="Thu, 28 Feb 2008 18:23:47 +0000"/>
                            <attachment id="12376232" name="stackTrace.log" size="11196" author="chengas123" created="Fri, 22 Feb 2008 15:05:26 +0000"/>
                            <attachment id="12376664" name="stackTraceAegisWSSecurity.log" size="6354" author="chengas123" created="Wed, 27 Feb 2008 19:53:31 +0000"/>
                            <attachment id="12376318" name="stackTraceWithSetCommentedOut.log" size="2997" author="chengas123" created="Sat, 23 Feb 2008 20:16:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112250</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1accf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>