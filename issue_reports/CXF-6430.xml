<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat May 27 09:45:22 UTC 2023

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6430] SwA: Wrong Content-Type of root part</title>
                <link>https://issues.apache.org/jira/browse/CXF-6430</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;we are implementing an ebMS3 solution using cxf 3. The profile to be implemented has the following requirements:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SwA (no MTOM)&lt;/li&gt;
	&lt;li&gt;SOAP 1.2&lt;/li&gt;
	&lt;li&gt;Due to the design of ebMS3 there is no WSDL&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As there is no WSDL we use the javax.xml.ws.Dispatch API with SOAPBinding.SOAP12HTTP_BINDING as binding. The message ebMS3 expects, according to its specification looks as follows:&lt;/p&gt;

&lt;p&gt;Content-Type: Multipart/Related; boundary=MIME_boundary;&lt;br/&gt;
type=application/soap+xml;&lt;br/&gt;
start=&quot;&amp;lt;car-data@cars.example.com&amp;gt;&quot;&lt;/p&gt;

&lt;p&gt;--MIME_boundary&lt;/p&gt;

&lt;p&gt;Content-Type: application/soap+xml; charset=UTF-8&lt;br/&gt;
Content-Transfer-Encoding: 8bit&lt;br/&gt;
Content-ID: &amp;lt;car-data@cars.example.com&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&apos;1.0&apos; ?&amp;gt;&lt;br/&gt;
&amp;lt;S12:Envelope xmlns:S12=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
&amp;lt;/S12:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;--MIME_boundary&lt;/p&gt;

&lt;p&gt;Content-Type: image/tiff&lt;br/&gt;
Content-Transfer-Encoding: binary&lt;br/&gt;
Content-ID: &amp;lt;car-photo@cars.example.com&amp;gt;&lt;/p&gt;

&lt;p&gt;...binary TIFF image of the car...&lt;/p&gt;

&lt;p&gt;-&lt;del&gt;MIME_boundary&lt;/del&gt;-&lt;/p&gt;


&lt;p&gt;However, what we produce is as follows:&lt;/p&gt;

&lt;p&gt;Content-Type:multipart/related; type=&quot;application/soap+xml&quot;; boundary=&quot;MIME_boundary&quot;; start=&quot;&amp;lt;car-data@cars.example.com&amp;gt;&quot;; start-info=&quot;application/soap+xml&quot;&lt;br/&gt;
    Accept:&lt;b&gt;/&lt;/b&gt;&lt;br/&gt;
    User-Agent:Apache CXF 3.0.1&lt;br/&gt;
    Cache-Control:no-cache&lt;br/&gt;
    Pragma:no-cache&lt;br/&gt;
    Host:127.0.0.1:8080&lt;br/&gt;
    Connection:keep-alive&lt;/p&gt;

&lt;p&gt;--MIME_boundary&lt;/p&gt;

&lt;p&gt;Content-Type: text/xml; charset=UTF-8; type=&quot;application/soap+xml&quot;&lt;br/&gt;
Content-Transfer-Encoding: binary&lt;br/&gt;
Content-ID: &amp;lt;car-data@cars.example.com&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&apos;1.0&apos; ?&amp;gt;&lt;br/&gt;
&amp;lt;S12:Envelope xmlns:S12=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
&amp;lt;/S12:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;--MIME_boundary&lt;/p&gt;

&lt;p&gt;Content-Type: image/tiff&lt;br/&gt;
Content-Transfer-Encoding: binary&lt;br/&gt;
Content-ID: &amp;lt;car-photo@cars.example.com&amp;gt;&lt;/p&gt;

&lt;p&gt;...binary TIFF image of the car...&lt;/p&gt;

&lt;p&gt;&amp;#8211; MIME_boundary--&lt;/p&gt;


&lt;p&gt;The difference lies in the Content-Type of the root part, which is expected as application/soap+xml but set to text/xml. When testing against an Axis driven implementation we get the following error:&lt;/p&gt;

&lt;p&gt;Error while executing the transport Method RuntimeException: Invalid Content-Type: text/xml; charset=UTF-8; type=&quot;application/soap+xml&quot;&lt;/p&gt;


&lt;p&gt;Our dispatch method looks like this:&lt;/p&gt;

&lt;p&gt;public SOAPMessage dispatch(final SOAPMessage soapMessage) &lt;/p&gt;
{
        final QName serviceName = new QName(&quot;http://example.com&quot;, &quot;msh-dispatch-service&quot;);
        final QName portName = new QName(&quot;http://example.com&quot;, &quot;msh-dispatch&quot;);
        final javax.xml.ws.Service service = javax.xml.ws.Service.create(serviceName);
        service.addPort(portName, SOAPBinding.SOAP12HTTP_BINDING, &quot;127.0.0.1:8080&quot;);
        Dispatch&amp;lt;SOAPMessage&amp;gt; dispatch = service.createDispatch(portName, SOAPMessage.class, javax.xml.ws.Service.Mode.MESSAGE);
        Policy policy = policyFactory.parsePolicy(&quot;mypolicy.xml&quot;);
        dispatch.getRequestContext().put(PolicyConstants.POLICY_OVERRIDE, policy);
        SOAPMessage result = dispatch.invoke(soapMessage);
        return result;
    }
</description>
                <environment></environment>
        <key id="12834186">CXF-6430</key>
            <summary>SwA: Wrong Content-Type of root part</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="kochc">Christian Koch</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Jun 2015 08:48:08 +0000</created>
                <updated>Fri, 14 Oct 2016 14:25:32 +0000</updated>
                            <resolved>Tue, 2 Jun 2015 11:57:14 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>3.1.1</fixVersion>
                    <fixVersion>3.0.6</fixVersion>
                    <fixVersion>2.7.17</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14569002" author="ay" created="Tue, 2 Jun 2015 11:57:14 +0000"  >&lt;p&gt;Hi Christian,&lt;br/&gt;
This issue should have been fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6431&quot; title=&quot;Attachment serialization does not conform to the relevant specs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6431&quot;&gt;&lt;del&gt;CXF-6431&lt;/del&gt;&lt;/a&gt;. Please refer to this ticket for the details on the corrected behavior. If your problem still persists, please reopen this ticket. &lt;br/&gt;
Thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12834309">CXF-6431</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fg5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>